<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>EPUB文件结构</title>
    <url>/posts/epub-structure/</url>
    <content><![CDATA[<p>EPUB 是一种广泛使用的电子书格式。实际上是一个 ZIP 压缩包，包含了一系列文件和目录，可以任何 ZIP 解压工具解压缩。</p>
<p>以下是常见的文件结构：</p>
<blockquote>
<p>虽然 EPUB 格式有一定的规范，但并没有严格要求必须使用特定的目录名。出版商或开发者可以根据需要自定义目录结构，只要在<code>container.xml</code>文件中正确引用这些路径即可。开发者可能会在 epub 文件中添加一些图片或脚本文件等，可能会导致结构看起来不同。</p>
</blockquote>
<ol>
<li><p><strong>MIME Type 文件</strong></p>
<ul>
<li>文件名：<code>mimetype</code></li>
<li>内容：<code>application/epub+zip</code></li>
<li>说明：这是一个文本文件，必须是压缩包中的第一个文件。它声明了文件的 MIME 类型。</li>
</ul>
</li>
<li><p><strong>META-INF 目录</strong></p>
<ul>
<li><p>目录名：<code>META-INF</code></p>
</li>
<li><p>说明：这个目录包含了元数据文件。</p>
<ul>
<li><code>container.xml</code>：定义了内容文件的路径，<code>container.xml</code> 文件是 EPUB 文件结构中的关键文件，通过解析 <code>container.xml</code> 文件中的 <code>full-path</code> 属性，可以找到并加载电子书的内容文件（<code>opf</code> 文件）。只要这个文件存在并且路径正确，电子书阅读器就能正确解析和显示电子书内容。</li>
</ul>
</li>
</ul>
</li>
<li><p><strong>OEBPS 目录</strong></p>
<ul>
<li><p>目录名：<code>OEBPS</code>（或其他名称，这个目录也可能不存在）</p>
</li>
<li><p>说明：这个目录包含了电子书的主要内容。</p>
<ul>
<li><code>package.opf</code>（或<code>content.opf</code>）：定义了电子书的结构和内容的元数据。</li>
<li><code>toc.xhtml/toc.ncx</code>：定义了电子书的目录结构。</li>
<li>各种 XHTML 文件：电子书的主要内容。</li>
<li>资源文件：如图像、CSS 样式表、JavaScript 文件等。</li>
</ul>
</li>
</ul>
</li>
<li><p><strong>toc.ncx</strong></p>
<blockquote>
<p>Table of Contents 的缩写，定义电子书的目录和导航结构</p>
</blockquote>
<p>application/x-dtbncx+xml 是一种 MIME 类型，通常用于表示一种特定格式的 XML 文件，称为 NCX（Navigation Center eXtended），通常包含以下元素</p>
<ul>
<li><code>&lt;navMap&gt;</code>：包含所有导航点的容器。</li>
<li><code>&lt;navPoint&gt;</code>：表示一个导航点（例如章节或节）。</li>
<li><code>&lt;navLabel&gt;</code>：包含导航点的可读文本。</li>
<li><code>&lt;content&gt;</code>指定导航点对应的内容文件和位置</li>
</ul>
</li>
</ol>
<h3 id="Epub-解析"><a href="#Epub-解析" class="headerlink" title="Epub 解析"></a>Epub 解析</h3><p>本质上我们都是在解析 xml 或者 html 文件，所以第一种方法比较直观，在获取到 Dom 并解析后，直接通过 querySelector 找到相应的元素并获取内容即可。这种方法存在的问题是，Epub 文件结构与指定的结构相同，部分 Epub 文件由于制作时间过早，或者制作者的规范问题，可能会导致解析失败。</p>
<p>第二种方法是使用 xpath 解析，这种方法的优点是，可以解析出 epub 文件中的所有元素，而且可以根据具体的命名空间直接查找到想要的内容（这就需要对 Epub 文件有更深的认知，同时需要了解 xpath 的使用方法，这里也是我看了部分 Epub Cfi 解析的项目代码后，才了解到）。</p>
<h3 id="CFI"><a href="#CFI" class="headerlink" title="CFI"></a>CFI</h3><p>CFI 是 Content Fragment Identifier 的缩写，是一种用于标识电子书内容片段的标识符。CFI 可以用于在电子书中定位特定的内容，例如在电子书中跳转到特定的页面或章节，在保存阅读进度或者书签时经常使用。</p>
<p>但个人了解下来，可能因为制作规范一直没有变更的原因，很多库停留在 jQuery 的时代，部分近几年的库也是根据之前的库修改而来，也没有相对详细的文档，不同项目解析的结构也差距甚远，对于解析结果没有明确的说明，需要对照 Epub 文件内容和源码才能知道表示的意思。</p>
<p><a class="link" href="https://www.pen2publishing.com/difference-between-epub-and-epub3/">epub2 与 epub3 的区别<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
]]></content>
      <categories>
        <category>杂谈</category>
      </categories>
      <tags>
        <tag>杂谈</tag>
      </tags>
  </entry>
  <entry>
    <title>目前的代理方案</title>
    <url>/posts/2025-proxy/</url>
    <content><![CDATA[<p>之前一直没怎么专门折腾过，直到前几天nas上装的v2rayA在更换节点后，给我nas卡死了，重启后一块固态还没挂载上，才又花了点时间整合一下解决方案T-T</p>
<h3 id="Nas代理"><a href="#Nas代理" class="headerlink" title="Nas代理"></a>Nas代理</h3><p>Nas装了FnOS，之前是用docker跑v2RayA来做代理服务的，找了一圈试下来<a class="link" href="https://github.com/nelvko/clash-for-linux-install">github.com/nelvko/clash-for-linux-install<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a>的安装使用体验最好，提了Issue作者也很快会有答复</p>
<p>如果想让局域网内的其他设备可以直接设置nas地址进行代理，需要进行以下操作：</p>
<ul>
<li><p>Nas 执行 <code>clashmixin -e</code> 进行修改：</p>
<ul>
<li>将 allow-lan 设置为 true，并设置好身份验证。</li>
<li>配置 bind-address，值为本机内网地址。</li>
</ul>
</li>
<li><p>Nas 执行 <code>clashproxy status</code> 获取代理地址。</p>
</li>
</ul>
<p><a class="link" href="https://github.com/nelvko/clash-for-linux-install/issues/226#issuecomment-3166864741" title="A服务器成功配置了clash-for-linux，B服务器能否使用A服务器上配置的clash客户端？">A服务器成功配置了clash-for-linux，B服务器能否使用A服务器上配置的clash客户端？<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<p>这样pc和手机就不用每次都专门开clash代理了，对应的软件或者插件设置好nas的代理地址就行</p>
<blockquote>
<p>过程中还发现了<code>https://gh-proxy.com/</code>这个网站，只要在github地址前加上他就能加速 优雅</p>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">git <span class="built_in">clone</span> --branch master --depth 1 https://gh-proxy.com/https://github.com/nelvko/clash-for-linux-install.git</span><br></pre></td></tr></table></figure></div></blockquote>
<h3 id="命令行代理"><a href="#命令行代理" class="headerlink" title="命令行代理"></a>命令行代理</h3><p>命令行代理实在太重要了，因为今年主要换了linux作为日常使用，开发和安装工具的时候使用命令行的场景变得更多了</p>
<p>按照之前的习惯，是自己写一个设置代理的脚本，需要的时候先执行一下再跑命令</p>
<p>后来逛github发现一个开源的工具很不错<a class="link" href="https://github.com/mzz2017/gg">gg (go-graft)<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a>，安装后只要在命令前加上gg就能做到命令行代理，管理也方便的多</p>
<h3 id="最后补充一下"><a href="#最后补充一下" class="headerlink" title="最后补充一下"></a>最后补充一下</h3><p>一定要有个备用机场，不然偶尔节点全挂了真是寸步难行</p>
]]></content>
      <categories>
        <category>杂谈</category>
      </categories>
      <tags>
        <tag>杂谈</tag>
      </tags>
  </entry>
  <entry>
    <title>Promise用法详解</title>
    <url>/posts/promise-usage/</url>
    <content><![CDATA[<h2 id="什么是Promise"><a href="#什么是Promise" class="headerlink" title="什么是Promise"></a>什么是Promise</h2><p>Promise是一个对象，代表了异步操作的最终完成或者失败。</p>
<p>下图为MDN中的Promise流程图</p>
<p>Promise存在三种状态分别为：</p>
<blockquote>
<p>其中fulfill和reject状态也被称之为已敲定（settled），即非pending状态</p>
</blockquote>
<ul>
<li>pending（等待中）：初始状态，还没有确定的结果</li>
<li>fulfill（已兑现）：成功状态，操作已完成</li>
<li>reject（已拒绝）：失败状态，操作未完成</li>
</ul>
<p>‍</p>
<p>​<img lazyload="" src="/images/loading.svg" data-src="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Promise/promises.png" alt="image">​</p>
<h2 id="thenable"><a href="#thenable" class="headerlink" title="thenable"></a>thenable</h2><p><a class="link" href="https://promisesaplus.com/">Promises/A+<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a>对于thenable的定义是：一个定义 then 方法的对象或函数</p>
<p>例如：</p>
<div class="code-container" data-rel="Javascript"><figure class="iseeu highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">thenableFn</span> = (<span class="params"></span>) =&gt; {</span><br><span class="line">    <span class="keyword">return</span> {</span><br><span class="line">        <span class="attr">then</span>: <span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> [</span><br><span class="line">            <span class="title function_">resolve</span>(<span class="string">'thenableFn Success'</span>)</span><br><span class="line">        ]</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> thenableobj = {</span><br><span class="line">    <span class="attr">then</span>: <span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> {</span><br><span class="line">        <span class="title function_">resolve</span>(<span class="string">'thenableFn Success'</span>)</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="title function_">thenableFn</span>().<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> {</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(res); <span class="comment">//thenableFn Success</span></span><br><span class="line">})</span><br><span class="line"></span><br><span class="line">thenableobj.<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> {</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(res); <span class="comment">//thenableFn Success</span></span><br><span class="line">})</span><br></pre></td></tr></table></figure></div>

<h2 id="Promise中的方法有哪些"><a href="#Promise中的方法有哪些" class="headerlink" title="Promise中的方法有哪些"></a>Promise中的方法有哪些</h2><h3 id="实例方法"><a href="#实例方法" class="headerlink" title="实例方法"></a>实例方法</h3><h4 id="then"><a href="#then" class="headerlink" title="then"></a>then</h4><p><strong>then</strong>方法接受两个参数，分别用于Promise在fulfilled与reject情况下的回调函数，then也会返回一个promise对象，这也就是为什么可以实现链式调用的原因</p>
<div class="code-container" data-rel="Javascript"><figure class="iseeu highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> promise = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> {</span><br><span class="line">  <span class="title function_">resolve</span>(<span class="string">'resolved1'</span>);</span><br><span class="line">})</span><br><span class="line"></span><br><span class="line">promise.<span class="title function_">then</span>(<span class="function">(<span class="params">value</span>) =&gt;</span> {</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(value); <span class="comment">// resolved1</span></span><br><span class="line">  <span class="comment">// 即使返回的是一个字符串，then也会将其包裹在一个promise中返回</span></span><br><span class="line">  <span class="keyword">return</span> <span class="string">'resolved2'</span>;</span><br><span class="line">}).<span class="title function_">then</span>(<span class="function">(<span class="params">value</span>) =&gt;</span> {</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(value); <span class="comment">// resolved2</span></span><br><span class="line">  <span class="keyword">return</span> <span class="string">'resolved3'</span>;</span><br><span class="line">}).<span class="title function_">then</span>(<span class="function">(<span class="params">value</span>) =&gt;</span> {</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(value); <span class="comment">// resolved3</span></span><br><span class="line">});</span><br></pre></td></tr></table></figure></div>

<h4 id="catch"><a href="#catch" class="headerlink" title="catch"></a>catch</h4><p><strong>catch</strong>是在promise被拒绝时使用的一个函数，它也会返回一个promise对象。</p>
<div class="code-container" data-rel="Javascript"><figure class="iseeu highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> promise = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> {</span><br><span class="line">	<span class="title function_">reject</span>(<span class="string">'error'</span>);</span><br><span class="line">})</span><br><span class="line"></span><br><span class="line">promise.<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> {</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">'first then:'</span>, res); <span class="comment">//因为reject，所以此处的代码不会执行</span></span><br><span class="line">}).<span class="title function_">catch</span>(<span class="function">(<span class="params">err</span>) =&gt;</span> {</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(err); <span class="comment">//error</span></span><br><span class="line">}).<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> {</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">'second then:'</span>, res); <span class="comment">//second then:undefined</span></span><br><span class="line">})</span><br></pre></td></tr></table></figure></div>

<h4 id="finally"><a href="#finally" class="headerlink" title="finally"></a>finally</h4><p><strong>finally</strong>在promise敲定（settled，无论是resolve还是reject）后执行,同时它也返回一个promise，在后面依旧可以进行链式调用。</p>
<div class="code-container" data-rel="Javascript"><figure class="iseeu highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> promise = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> {</span><br><span class="line">	<span class="title function_">reject</span>(<span class="string">'error'</span>);</span><br><span class="line">})</span><br><span class="line"></span><br><span class="line">promise.<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> {</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">'first then:'</span>, res); <span class="comment">//因为reject，所以此处的代码不会执行</span></span><br><span class="line">}).<span class="title function_">catch</span>(<span class="function">(<span class="params">err</span>) =&gt;</span> {</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(err); <span class="comment">//error</span></span><br><span class="line">}).<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> {</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">'second then:'</span>, res); <span class="comment">//second then:undefined</span></span><br><span class="line">}).<span class="title function_">finally</span>(<span class="function">() =&gt;</span> {</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">'finally'</span>); <span class="comment">//finally</span></span><br><span class="line">}).<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> {</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">'third then:'</span>, res); <span class="comment">//third then:undefined</span></span><br><span class="line">});</span><br></pre></td></tr></table></figure></div>

<h3 id="静态方法"><a href="#静态方法" class="headerlink" title="静态方法"></a>静态方法</h3><h4 id="reslove"><a href="#reslove" class="headerlink" title="reslove"></a>reslove</h4><p>返回一个promise对象，并附带兑现的值</p>
<h4 id="reject"><a href="#reject" class="headerlink" title="reject"></a>reject</h4><p>返回一个promise对象，并附带拒绝的原因</p>
<h4 id="all"><a href="#all" class="headerlink" title="all"></a>all</h4><p>接收一个promise可迭代对象，并返回一个promise。在所有传入的promise兑现后，返回一个包含所有promise对象兑现值的数组；如果其中有promise被拒绝，那么返回第一个promise被拒绝的原因</p>
<div class="code-container" data-rel="Javascript"><figure class="iseeu highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//全都fulfilled时</span></span><br><span class="line"><span class="keyword">const</span> promiseA = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> {</span><br><span class="line">	<span class="title function_">resolve</span>(<span class="string">'successA'</span>);</span><br><span class="line">})</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> promiseB = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> {</span><br><span class="line">	<span class="title function_">resolve</span>(<span class="string">'successB'</span>);</span><br><span class="line">})</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> promiseC = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> {</span><br><span class="line">	<span class="title function_">resolve</span>(<span class="string">'successC'</span>);</span><br><span class="line">})</span><br><span class="line"></span><br><span class="line"><span class="title class_">Promise</span>.<span class="title function_">all</span>([promiseA, promiseB, promiseC]).<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> {</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(res); <span class="comment">// [ 'successA', 'successB', 'successC' ]</span></span><br><span class="line">}).<span class="title function_">catch</span>(<span class="function">(<span class="params">err</span>) =&gt;</span> {</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(err);</span><br><span class="line">});</span><br></pre></td></tr></table></figure></div>

<div class="code-container" data-rel="Javascript"><figure class="iseeu highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//其中有一个reject时</span></span><br><span class="line"><span class="keyword">const</span> promiseA = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> {</span><br><span class="line">	<span class="title function_">resolve</span>(<span class="string">'successA'</span>);</span><br><span class="line">})</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> promiseB = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> {</span><br><span class="line">	<span class="title function_">reject</span>(<span class="string">'errorB'</span>);</span><br><span class="line">})</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> promiseC = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> {</span><br><span class="line">	<span class="title function_">resolve</span>(<span class="string">'successC'</span>);</span><br><span class="line">})</span><br><span class="line"></span><br><span class="line"><span class="title class_">Promise</span>.<span class="title function_">all</span>([promiseA, promiseB, promiseC]).<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> {</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(res);</span><br><span class="line">}).<span class="title function_">catch</span>(<span class="function">(<span class="params">err</span>) =&gt;</span> {</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(err); <span class="comment">// errorB</span></span><br><span class="line">});</span><br></pre></td></tr></table></figure></div>

<h4 id="allSettled"><a href="#allSettled" class="headerlink" title="allSettled"></a>allSettled</h4><p>接收一个promise的可迭代对象，返回每个promise结果描述的数组</p>
<div class="code-container" data-rel="Javascript"><figure class="iseeu highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> promiseA = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> {</span><br><span class="line">	<span class="title function_">resolve</span>(<span class="string">'successA'</span>);</span><br><span class="line">})</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> promiseB = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> {</span><br><span class="line">	<span class="title function_">reject</span>(<span class="string">'errorB'</span>);</span><br><span class="line">})</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> promiseC = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> {</span><br><span class="line">	<span class="title function_">resolve</span>(<span class="string">'successC'</span>);</span><br><span class="line">})</span><br><span class="line"></span><br><span class="line"><span class="title class_">Promise</span>.<span class="title function_">allSettled</span>([promiseA, promiseB, promiseC]).<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> {</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(res);</span><br><span class="line">})</span><br><span class="line"></span><br><span class="line"><span class="comment">//[</span></span><br><span class="line"><span class="comment">//  { status: 'fulfilled', value: 'successA' },</span></span><br><span class="line"><span class="comment">//  { status: 'rejected', reason: 'errorB' },</span></span><br><span class="line"><span class="comment">//  { status: 'fulfilled', value: 'successC' }</span></span><br><span class="line"><span class="comment">//]</span></span><br></pre></td></tr></table></figure></div>

<h4 id="race"><a href="#race" class="headerlink" title="race"></a>race</h4><p>接收一个promise可迭代对象，返回一个promise，哪个promise先敲定就先返回哪个（无论是resolve还是reject）</p>
<div class="code-container" data-rel="Javascript"><figure class="iseeu highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 这里就用mdn的例子了</span></span><br><span class="line"><span class="keyword">const</span> promise1 = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> {</span><br><span class="line">  <span class="built_in">setTimeout</span>(resolve, <span class="number">500</span>, <span class="string">'one'</span>);</span><br><span class="line">});</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> promise2 = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> {</span><br><span class="line">  <span class="built_in">setTimeout</span>(resolve, <span class="number">100</span>, <span class="string">'two'</span>);</span><br><span class="line">});</span><br><span class="line"></span><br><span class="line"><span class="title class_">Promise</span>.<span class="title function_">race</span>([promise1, promise2]).<span class="title function_">then</span>(<span class="function">(<span class="params">value</span>) =&gt;</span> {</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(value);</span><br><span class="line">  <span class="comment">// 这里两个promise都被兑现了，但promise2的兑现时间更快</span></span><br><span class="line">});</span><br></pre></td></tr></table></figure></div>

<div class="code-container" data-rel="Javascript"><figure class="iseeu highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 如果reject先执行，那么就会先返回reject</span></span><br><span class="line"><span class="keyword">const</span> promise1 = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> {</span><br><span class="line">  <span class="built_in">setTimeout</span>(resolve, <span class="number">500</span>, <span class="string">'one'</span>);</span><br><span class="line">});</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> promise2 = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> {</span><br><span class="line">  <span class="built_in">setTimeout</span>(reject, <span class="number">100</span>, <span class="string">'two'</span>);</span><br><span class="line">});</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> promise3 = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> {</span><br><span class="line">  <span class="built_in">setTimeout</span>(resolve, <span class="number">200</span>, <span class="string">'three'</span>);</span><br><span class="line">});</span><br><span class="line"></span><br><span class="line"><span class="title class_">Promise</span>.<span class="title function_">race</span>([promise1, promise2, promise3]).<span class="title function_">then</span>(<span class="function">(<span class="params">value</span>) =&gt;</span> {</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(value);</span><br><span class="line">}).<span class="title function_">catch</span>(<span class="function">(<span class="params">err</span>) =&gt;</span> {</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(err); <span class="comment">// two</span></span><br><span class="line">});</span><br></pre></td></tr></table></figure></div>

<h4 id="any"><a href="#any" class="headerlink" title="any"></a>any</h4><p>接收一个promise可迭代对象，返回第一个被兑现（resolve）promise的兑现值（会忽略之前的reject），如果所有promise都被拒绝，那么以数组的形式返回所有被拒绝的原因。</p>
<blockquote>
<p>如果文中有任何错误欢迎指正~还是建议直接看官网理解可能会更好</p>
</blockquote>
<p><a class="link" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Promise">Promise - JavaScript | MDN<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<p><a class="link" href="https://promisesaplus.com/">Promises/A+<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<p><a class="link" href="https://github.com/LinDaiDai/niubility-coding-js/blob/master/JavaScript/%E5%BC%82%E6%AD%A5/%E8%A6%81%E5%B0%B1%E6%9D%A545%E9%81%93Promise%E9%9D%A2%E8%AF%95%E9%A2%98%E4%B8%80%E6%AC%A1%E7%88%BD%E5%88%B0%E5%BA%95.md">45道Promise题<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<p>‍</p>
]]></content>
      <categories>
        <category>Frontnd</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title>Sunshine + Moonlight 串流操作记录（一）</title>
    <url>/posts/sunshine-and-moonlight-streaming/</url>
    <content><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>之前一直觉得串流什么的搞得很麻烦，而且实现了也接受不了那个延迟和清晰度。</p>
<p>直到我最近研究平板远程电脑的时候，看到了网易的 GameViewer， 因为还在宣传阶段，所以没有收费功能，而且远程和串流的效果都很不错，这就拿来试试！</p>
<p>体验了一下之后发现效果确实不错，体验相当好，因为是同一局域网内，所以延迟基本忽略不计，而且清晰度也很顶。但串流当电脑的扩展屏这功能还是算了，每次串流都要做很多操作，而且还存在不显示鼠标、部分功能遮挡画面的问题。</p>
<p>不行还是折腾一下吧，平板做扩展屏也很香呐。</p>
<h2 id="功能介绍"><a href="#功能介绍" class="headerlink" title="功能介绍"></a>功能介绍</h2><p><a class="link" href="https://github.com/LizardByte/Sunshine">Sunshine<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a> + <a class="link" href="https://github.com/moonlight-stream/moonlight-qt">Moonlight<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a> 本来是一种游戏串流的解决方案，玩家只需在电脑上运行 Sunshine 服务端，并在平板或手机上使用 Moonlight 客户端，即可通过流式传输连接电脑并游玩游戏。如果再加上一块虚拟显示器，将虚拟屏幕显示在平板上，就能让平板作为电脑的扩展屏使用。</p>
<h2 id="Sunshine-的安装和配置"><a href="#Sunshine-的安装和配置" class="headerlink" title="Sunshine 的安装和配置"></a>Sunshine 的安装和配置</h2><p>可以在 <a class="link" href="https://github.com/LizardByte/Sunshine/releases">GitHub Release<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a> 或 <a class="link" href="https://app.lizardbyte.dev/Sunshine/?lng=en#Download">官网<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a> 中下载 Sunshine， 以下为 Windows 11 演示。</p>
<ol>
<li>在 Sunshine 的 <a class="link" href="https://github.com/LizardByte/Sunshine/releases">Github Release<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a>中选择最新版本，下载 sunshine-windows-installer.exe。</li>
</ol>
<p><img lazyload="" src="/images/loading.svg" data-src="https://jhao413.oss-cn-beijing.aliyuncs.com/20241120201525.png" alt="Sunshine Download"></p>
<ol start="2">
<li>安装完成后，在状态栏中找到 Sunshine 的图标，右键点击 Open Sunshine, 浏览器会打开 <a class="link" href="https://localhost:47990/">https://localhost:47990<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a> ,设置用户名密码后登入。</li>
</ol>
<p><img lazyload="" src="/images/loading.svg" data-src="https://jhao413.oss-cn-beijing.aliyuncs.com/20241120202003.png"></p>
<h2 id="Moonlight-的安装和配置"><a href="#Moonlight-的安装和配置" class="headerlink" title="Moonlight 的安装和配置"></a>Moonlight 的安装和配置</h2><p>Moonlight 支持 Windows、maxOS、Android、IOS 系统，以下为 Android 演示。</p>
<ol>
<li><p>Google 商店搜索 Moonlight 下载安装，或者通过 <a class="link" href="https://moonlight-stream.org/">Moonlight<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a> 的官网下载。</p>
</li>
<li><p>安装成功后，Moonlight 会自动扫描局域网内的电脑，如果没有可以手动添加（输入 PC 的 IPv4 的地址即可）。</p>
</li>
<li><p>点击要串流的设备，首次点击时，Moonlight 会显示 PIN 码，此时在 Sunshine 的面板中输入 PIN 码进行配对即可。</p>
</li>
</ol>
<blockquote>
<p>如果只是希望串流打游戏，或者平板镜像电脑的画面，就已经可以结束嘞！</p>
</blockquote>
<h2 id="虚拟显示器"><a href="#虚拟显示器" class="headerlink" title="虚拟显示器"></a>虚拟显示器</h2><ol>
<li><p>访问 Virtual-Display-Driver 的 <a class="link" href="https://github.com/itsmikethetech/Virtual-Display-Driver/releases">Github Releases<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a> 或 <a class="link" href="https://vdd.mikethetech.com/">官网<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a> 下载最新版本。（注意需要最新版本，如果不是的话，需要注意下载版本的发布时间，将电脑的本地时间调整到发布的那一年，不然在最后安装硬件的步骤时会出错）</p>
</li>
<li><p>下载后解压文件，将解压后的 IddSampleDriver 文件夹放至 C 盘中。（例：<code>C:\IddSampleDriver</code> ）</p>
</li>
<li><p>如果需要添加自定义分辨率和自定义刷新率的话，可以在 option.txt 中添加。</p>
</li>
<li><p>以管理员身份运行 installCert.bat 文件。</p>
</li>
<li><p>打开设备管理器 -&gt; 选中显示适配器 -&gt; 点击工作栏中的操作 -&gt; 添加过时硬件 -&gt; 安装手动从列表选择的硬件 -&gt; 从磁盘安装 -&gt; 选择 <code>C:\IddSampleDriver</code> 中的 <code>IddSampleDriver.inf</code> -&gt; 下一页（安装）</p>
</li>
<li><p>打开 Sunshine 配置音视频的页面，输入显示器的名称。（这里可以打开 Sunshine 的安装目录，运行 <code>tools\dxgi-info.exe</code>命令查看）</p>
</li>
<li><p>保存应用 Sunshine 的配置后，就可以实现平板作为电脑的扩展屏啦</p>
</li>
</ol>
<blockquote>
<p>注意！！！如果有核显也有独显的话，需要在设备管理器中禁用核显，不然会 Moonlight 在连接时会黑屏报错：没有接收到来自主机的视频,请检查您的防火墙</p>
</blockquote>
<blockquote>
<p>因为做记录，可能没有教程那么详细，所以列一下过程中觉得还不错的教程</p>
</blockquote>
<p><a class="link" href="https://www.bilibili.com/video/BV13i421r7Ff/?spm_id_from=333.999.0.0&vd_source=92ad0963f9f6e1361b63d95a2ae52375">摄影师云飞的串流视频教程<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<p><a class="link" href="https://flowus.cn/lecheng/share/3a591f93-f48b-4164-9028-bade2c35ef58">Moonlight 贴吧看到的进阶教程<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<p>还有就是本文提到软件的官网和 GitHub 🥹</p>
]]></content>
      <categories>
        <category>Software</category>
      </categories>
      <tags>
        <tag>Software</tag>
      </tags>
  </entry>
  <entry>
    <title>axios get与post请求</title>
    <url>/posts/9143/</url>
    <content><![CDATA[<h2 id="axios-get与post请求"><a href="#axios-get与post请求" class="headerlink" title="axios get与post请求"></a>axios get与post请求</h2><h4 id="get请求"><a href="#get请求" class="headerlink" title="get请求"></a>get请求</h4><p> <em>/api</em>:url地址</p>
<p><em>params</em>:{}中写参数</p>
<p><em>response</em>:处理返回结果</p>
<div class="code-container" data-rel="Javascript"><figure class="iseeu highlight javascript"><table><tr><td class="code"><pre><span class="line">axios.<span class="title function_">get</span>(<span class="string">'/api'</span>, {</span><br><span class="line">                <span class="attr">params</span>: {</span><br><span class="line">                    <span class="attr">content</span>:<span class="string">''</span></span><br><span class="line">                },</span><br><span class="line">            }).<span class="title function_">then</span>(</span><br><span class="line">                <span class="function"><span class="params">response</span> =&gt;</span> {</span><br><span class="line">                    <span class="variable language_">console</span>.<span class="title function_">log</span>(response)</span><br><span class="line">                })</span><br></pre></td></tr></table></figure></div>

<h4 id="post请求"><a href="#post请求" class="headerlink" title="post请求"></a>post请求</h4><p>qs.stringify()将对象 序列化成URL的形式，以&amp;进行拼接（需要导入qs模块）</p>
<div class="code-container" data-rel="Javascript"><figure class="iseeu highlight javascript"><table><tr><td class="code"><pre><span class="line">axios.<span class="title function_">post</span>(<span class="string">'/api/api/login'</span>, qs.<span class="title function_">stringify</span>(</span><br><span class="line">                                {</span><br><span class="line">                                        <span class="attr">content</span>:<span class="string">""</span></span><br><span class="line">                                }),</span><br><span class="line">                                {</span><br><span class="line">                                    <span class="attr">headers</span>: {</span><br><span class="line">                                        <span class="string">"CSRF-token"</span>:<span class="string">""</span></span><br><span class="line">                                        <span class="comment">//headers发送cookies信息</span></span><br><span class="line">                                    }</span><br><span class="line">                                }, )</span><br><span class="line">                            .<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> {</span><br><span class="line">                                <span class="comment">//处理返回信息</span></span><br><span class="line">                            });</span><br></pre></td></tr></table></figure></div>
]]></content>
      <categories>
        <category>Vue</category>
      </categories>
      <tags>
        <tag>Vue</tag>
      </tags>
  </entry>
  <entry>
    <title>WIFI杀手制作</title>
    <url>/posts/3560/</url>
    <content><![CDATA[<h1 id="WIFI杀手！"><a href="#WIFI杀手！" class="headerlink" title="WIFI杀手！"></a>WIFI杀手！</h1><p>高中十分喜欢的一个小玩意，拿出来记录一下，百度上教程比较少，也比较杂乱，那就自己写一个吧。</p>
<h3 id="制作工具"><a href="#制作工具" class="headerlink" title="制作工具"></a>制作工具</h3><p>既然高中都能做，那也可想而知，制作成本很低，而且容易操作，手机也可以完成刷入WIFI杀手的一系列操作</p>
<ol>
<li>esp8266开发板一个（4MB的版本，外接天线或者不外接天线的均可，但一定要是4Mb版本的）</li>
<li>一台电脑或者手机（手机就在这里不讲了，手机也可以做但是比电脑麻烦一点</li>
<li>一根可以数据线（有的线只支持充电，不支持传输数据，遇到这种情况换一根就好了，不过现在这种情况也很少了）</li>
</ol>
<p>准备好这些我们就可以开始WIFI杀手的制作啦</p>
<h3 id="刷入WIFI杀手固件"><a href="#刷入WIFI杀手固件" class="headerlink" title="刷入WIFI杀手固件"></a>刷入WIFI杀手固件</h3><p>做这些准备工作之前，先下载</p>
<ol>
<li>首先，将esp8266连接电脑，这时esp8266会常亮蓝灯</li>
<li>解压我发的文件，如下图所示<img lazyload="" src="/images/loading.svg" data-src="/img/esp8266/1.png"><br><strong>安装烧录工具文件夹里的应用程序</strong>，现在的电脑一般是54位的，除了一些学校的机房可能还是32位，实在不清楚自己电脑的话，百度一下</li>
</ol>
<p><strong>注意一下另一个文件就是WIFI杀手的固件</strong></p>
<ol start="3">
<li>现在打开烧录工具，应该看到如下界面<img lazyload="" src="/images/loading.svg" data-src="/img/esp8266/2.png">可能你们的端口不是COM3，也可能时COM4，这个无所谓，只要是插esp8266的那个口就行，要是烧录失败了，就换另外一个口呗，或者自己查一下esp8266插的是哪个口</li>
<li>现在点击Config，然后点击那个齿轮，选择刚刚的WIFI烧录固件<img lazyload="" src="/images/loading.svg" data-src="/img/esp8266/3.png"></li>
<li>然后点击Advanced，将参数修改为如下图所示<img lazyload="" src="/images/loading.svg" data-src="/img/esp8266/4.png"></li>
<li>最后再点Operation，Flash刷入就ok（在刷入的过程中，esp8266会蓝灯闪烁为正常现象，刷完后，不闪烁）</li>
</ol>
<p>就此固件刷入成功！</p>
<h3 id="WIFI杀手的使用"><a href="#WIFI杀手的使用" class="headerlink" title="WIFI杀手的使用"></a>WIFI杀手的使用</h3><ol>
<li>下载我发的那个文件夹里的app安装</li>
<li>打开app看到如下界面<img lazyload="" src="/images/loading.svg" data-src="/img/esp8266/5.jpg"></li>
<li>汉化版的，我就讲一下大概过程吧，搜索WIFI-&gt;选定用户-&gt;选择攻击方式-&gt;攻击<br>模拟信号的话直接在攻击目录下输入参数模拟即可<br>esp8266很强大，其他有趣的固件和做法可以自己尝试一下~</li>
</ol>
]]></content>
      <categories>
        <category>esp8266</category>
      </categories>
      <tags>
        <tag>esp8266</tag>
      </tags>
  </entry>
  <entry>
    <title>frp更新后的配置文件写法变更</title>
    <url>/posts/1/</url>
    <content><![CDATA[<p>从 v0.52.0 版本开始，frp 开始支持 TOML、YAML 和 JSON 作为配置文件格式</p>
<p>v0.52.0版本前，frp使用.ini作为配置文件的格式，基本配置如下：</p>
<div class="code-container" data-rel="Ini"><figure class="iseeu highlight ini"><table><tr><td class="code"><pre><span class="line"><span class="section">[common]</span></span><br><span class="line"><span class="attr">server_addr</span> = &lt;server_host&gt;</span><br><span class="line"><span class="attr">server_port</span> = &lt;server_port&gt;</span><br><span class="line"><span class="attr">token</span> = &lt;password&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 服务名称，在服务器端不能重复</span></span><br><span class="line"><span class="section">[app_http]</span></span><br><span class="line"><span class="attr">type</span>=tcp</span><br><span class="line"><span class="comment"># 需要转发的本地ip，可以改成局域网的ip做转发</span></span><br><span class="line"><span class="attr">local_ip</span> = <span class="number">127.0</span>.<span class="number">0.1</span></span><br><span class="line"><span class="comment"># 需要转发的本地端口</span></span><br><span class="line"><span class="attr">local_port</span> = <span class="number">80</span></span><br><span class="line"><span class="attr">remote_port</span> = &lt;remort_port_1&gt;</span><br><span class="line"></span><br><span class="line"><span class="section">[app_https]</span></span><br><span class="line"><span class="attr">type</span>=tcp</span><br><span class="line"><span class="attr">local_ip</span>=<span class="number">127.0</span>.<span class="number">0.1</span></span><br><span class="line"><span class="attr">local_port</span> =<span class="number">443</span></span><br><span class="line"><span class="attr">remote_port</span>=&lt;remort_port_2&gt;</span><br></pre></td></tr></table></figure></div>

<p>由于更新后ini文件被弃用，但网上依旧有很多的文章在写之前的配置，没有标注版本，导致出现配置文件在不同版本间混用的情况，导致莫名的bug（大多会提示ini文件已被弃用的提示）</p>
<p>如果在 v0.52.0 以后的版本中，使用如[common]的这种写法，即使文件为.toml文件，也会被frp当作ini文件进行处理</p>
<p>所以按照按照官方文档的示例，以后的版本配置文件应如以下代码所示</p>
<div class="code-container" data-rel="Toml"><figure class="iseeu highlight toml"><table><tr><td class="code"><pre><span class="line"><span class="attr">serverAddr</span> = <span class="string">"x.x.x.x"</span></span><br><span class="line"><span class="attr">serverPort</span> = <span class="number">7000</span></span><br><span class="line"></span><br><span class="line"><span class="section">[[proxies]]</span></span><br><span class="line"><span class="attr">name</span> = <span class="string">"ssh"</span></span><br><span class="line"><span class="attr">type</span> = <span class="string">"tcp"</span></span><br><span class="line"><span class="attr">localIP</span> = <span class="string">"127.0.0.1"</span></span><br><span class="line"><span class="attr">localPort</span> = <span class="number">22</span></span><br><span class="line"><span class="attr">remotePort</span> = <span class="number">6000</span></span><br><span class="line"><span class="attr">auth.token</span> = <span class="string">"xxxxx"</span></span><br></pre></td></tr></table></figure></div>

<p>参考链接</p>
<blockquote>
<p><a class="link" href="https://gofrp.org/zh-cn/docs/features/common/configure/">frp官方文档<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
</blockquote>
<blockquote>
<p><a class="link" href="https://github.com/fatedier/frp/blob/dev/conf/frpc_full_example.toml">frpc_full_example.toml<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
</blockquote>
<blockquote>
<p><a class="link" href="https://github.com/fatedier/frp/issues/3724">toml配置问题<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
</blockquote>
]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>frp</tag>
      </tags>
  </entry>
  <entry>
    <title>axios的基本使用</title>
    <url>/posts/55319/</url>
    <content><![CDATA[<h2 id="axios的基本使用"><a href="#axios的基本使用" class="headerlink" title="axios的基本使用"></a>axios的基本使用</h2><p>Axios 是一个基于 promise 的 HTTP 库，可以用在浏览器和 node.js 中。</p>
<p>最简单的axios写法如下</p>
<div class="code-container" data-rel="Javascript"><figure class="iseeu highlight javascript"><table><tr><td class="code"><pre><span class="line">axios.<span class="title function_">get</span>(<span class="string">'url'</span>)</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> {</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(response);</span><br><span class="line">  })</span><br><span class="line">  .<span class="title function_">catch</span>(<span class="function"><span class="params">err</span> =&gt;</span> {</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(error);</span><br><span class="line">  });</span><br></pre></td></tr></table></figure></div>

<p>这样我们就可以完成一个简单的get请求，但是在大多数情况下，我们总是会遇到跨域相关的问题。</p>
<h3 id="什么是跨域"><a href="#什么是跨域" class="headerlink" title="什么是跨域"></a>什么是跨域</h3><p>跨域，指的是浏览器不能执行其他网站的脚本。它是由浏览器的同源策略造成的，是浏览器施加的安全限制。</p>
<p>最常见的就是当域名不同时（如下）</p>
<div class="code-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="code"><pre><span class="line">www.abc.com 访问 www.def.com</span><br></pre></td></tr></table></figure></div>

<p>有的网站会在服务端写好，这样我们请求接口时就不会遇到跨域的问题，但是大多数并不会，也就是为什么在看相关教程时看着老师可以直接请求数据，但是自己照着写时却突然蹦出来了跨域的问题（老师自己写的接口，在服务端就解决了跨域的问题）。</p>
<h3 id="如何解决跨域问题"><a href="#如何解决跨域问题" class="headerlink" title="如何解决跨域问题"></a>如何解决跨域问题</h3><p>这里分为vue cli2与 vue cli3/4的解决方法，因为配置文件发生了相应的改变所以有一些小的变动，网上大多数的解决方法都是cli2放在cli3/4是不可行的。</p>
<h4 id="STEP1"><a href="#STEP1" class="headerlink" title="STEP1"></a>STEP1</h4><p>修改/创建配置文件</p>
<h5 id="vue-cli2"><a href="#vue-cli2" class="headerlink" title="vue cli2"></a>vue cli2</h5><p>将config文件夹下的index.js打开，写入代码如下</p>
<p>注意这里不要改成es6语法，具体为啥我还不是特别清楚，官方文档是这样写的，我改成es6是没法正常运行的。。。详情见：<a class="link" href="https://cli.vuejs.org/zh/config/">Vue官方文档：配置参考<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<p>注意devServe，也就是说只能在开发环境下实现跨域，打包后在生产环境下无法实现跨域</p>
<p>为什么这样写可以实现跨域？上面的链接中devServer.proxy有详细说到~</p>
<div class="code-container" data-rel="Javascript"><figure class="iseeu highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = {</span><br><span class="line">  <span class="attr">devServer</span>: {</span><br><span class="line">    <span class="attr">proxy</span>: {</span><br><span class="line">      <span class="string">'/api'</span>: {</span><br><span class="line">        <span class="attr">target</span>: <span class="string">'https://url.com'</span>, <span class="comment">//对应自己的接口</span></span><br><span class="line">        <span class="attr">changeOrigin</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">ws</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">pathRewrite</span>: {</span><br><span class="line">          <span class="string">'^/api'</span>: <span class="string">''</span></span><br><span class="line">        }</span><br><span class="line">        <span class="comment">//这里的名字可以自定义（api）</span></span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></table></figure></div>

<h5 id="vue-cli3-4"><a href="#vue-cli3-4" class="headerlink" title="vue cli3/4"></a>vue cli3/4</h5><p>直接在根目录下修改或者创建vue.config.js（名字是固定的！官方就是这么规定的，其他名字不会生效），写入的代码同上</p>
<h4 id="STEP2"><a href="#STEP2" class="headerlink" title="STEP2"></a>STEP2</h4><p>创建一个js文件名字随意，大致代码如下</p>
<p>axios更多的实例请求配置详见：<a class="link" href="https://www.kancloud.cn/yunye/axios/234845">Axios中文说明<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<div class="code-container" data-rel="Javascript"><figure class="iseeu highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">"axios"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">request</span>(<span class="params">config</span>) {</span><br><span class="line">  创建一个axios实例</span><br><span class="line">    <span class="keyword">var</span> instance = axios.<span class="title function_">create</span>({</span><br><span class="line">        <span class="attr">method</span>: <span class="string">'get'</span>,<span class="comment">//传输方式（get/post）</span></span><br><span class="line">        <span class="attr">params</span>: {</span><br><span class="line">          <span class="comment">//需要传递的参数写在这里</span></span><br><span class="line">          <span class="attr">name</span>:<span class="string">'jhao'</span></span><br><span class="line">        },</span><br><span class="line">        <span class="attr">headers</span>: {</span><br><span class="line">            <span class="string">'content-type'</span>: <span class="string">'text/plain:charset=UTF-8'</span></span><br><span class="line">        }</span><br><span class="line">    });</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">instance</span>(config)<span class="comment">//返回参数</span></span><br><span class="line">}</span><br></pre></td></tr></table></figure></div>

<h4 id="STEP3"><a href="#STEP3" class="headerlink" title="STEP3"></a>STEP3</h4><p>在main.js中导入STEP2的文件</p>
<div class="code-container" data-rel="Javascript"><figure class="iseeu highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> { request } <span class="keyword">from</span> <span class="string">'./api/request'</span></span><br><span class="line"><span class="comment">//换成自己的js文件</span></span><br><span class="line"></span><br><span class="line"><span class="title function_">request</span>(<span class="string">'/api/cgi-bin/musicu.fcg'</span>).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span>{</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(res);</span><br><span class="line">})</span><br></pre></td></tr></table></figure></div>

<h4 id="结束"><a href="#结束" class="headerlink" title="结束"></a>结束</h4><p>到这里在开发环境中的跨域请求就解决了，要在生产环境中使用还需要一点其他的配置，以后再写。小白个人的学习总结，可能会存在一些技术知识上的认知错误，欢迎指出，大佬轻喷、轻喷~</p>
]]></content>
      <categories>
        <category>Vue</category>
      </categories>
      <tags>
        <tag>Vue</tag>
      </tags>
  </entry>
  <entry>
    <title>Github使用</title>
    <url>/posts/60077/</url>
    <content><![CDATA[<h1 id="GitHub使用"><a href="#GitHub使用" class="headerlink" title="GitHub使用"></a>GitHub使用</h1><h3 id="什么是GitHub"><a href="#什么是GitHub" class="headerlink" title="什么是GitHub"></a>什么是GitHub</h3><p>GitHub是一个面向开源及私有软件项目的托管平台，因为只支持git 作为唯一的版本库格式进行托管，故名GitHub。作为开源代码库以及版本控制系统，Github拥有超过900万开发者用户。随着越来越多的应用程序转移到了云上，Github已经成为了管理软件开发以及发现已有代码的首选方法。<br>如前所述，作为一个分布式的版本控制系统，在Git中并不存在主库这样的概念，每一份复制出的库都可以独立使用，任何两个库之间的不一致之处都可以进行合并。（论百度百科的重要性）</p>
<h3 id="创建仓库"><a href="#创建仓库" class="headerlink" title="创建仓库"></a>创建仓库</h3><ol>
<li><a class="link" href="https://github.com/">Github传送门<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a>，进入网站注册账号，进入主页后，点击New，如下图<img lazyload="" src="/images/loading.svg" data-src="/img/github/1.png"></li>
<li>创建仓库，Repository name处写仓库名，然后创建即可</li>
</ol>
<h3 id="安装git"><a href="#安装git" class="headerlink" title="安装git"></a>安装git</h3><ol>
<li><a class="link" href="https://git-scm.com/downloads">git下载传送门<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a>,下载完成后一路next即可</li>
<li>安装成功后，打开Git Bash会弹出一个类似于命令的窗口，安装成功后在窗口输入</li>
</ol>
<div class="code-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ git config --global user.name "Your Name"</span><br><span class="line">$ git config --global user.email "email@example.com"</span><br></pre></td></tr></table></figure></div>

<p>你的名字和邮箱</p>
<h3 id="创建本地仓库"><a href="#创建本地仓库" class="headerlink" title="创建本地仓库"></a>创建本地仓库</h3><ol>
<li>创建一个空文件夹然后输入</li>
</ol>
<div class="code-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ mkdir learngit</span><br><span class="line">$ cd learngit</span><br><span class="line">$ pwd</span><br></pre></td></tr></table></figure></div>

<p>learnfit就是你之前在GitHub创建的仓库名<br>2. 通过git init命令把这个目录变成Git可以管理的仓库</p>
<div class="code-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ git init</span><br></pre></td></tr></table></figure></div>

<ol start="3">
<li>这时候在空目录下创建一个readme.txt,内容随意，规范一下可以写成</li>
</ol>
<div class="code-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="code"><pre><span class="line">Git is a version control system.</span><br><span class="line">Git is free software.</span><br></pre></td></tr></table></figure></div>

<ol start="4">
<li>git add,把文件添加到仓库</li>
</ol>
<div class="code-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ git add readme.txt</span><br></pre></td></tr></table></figure></div>

<p>5.git commit，将文件提交到仓库</p>
<div class="code-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ git commit -m "wrote a readme file"</span><br></pre></td></tr></table></figure></div>

<p>-m后面输入的是本次提交的说明，可以输入任意内容</p>
<h3 id="远程仓库"><a href="#远程仓库" class="headerlink" title="远程仓库"></a>远程仓库</h3><ol>
<li>创建ssh key</li>
</ol>
<div class="code-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ ssh-keygen -t rsa -C "youremail@example.com"</span><br></pre></td></tr></table></figure></div>

<p>记得把邮箱改成自己的，然后再用户目录就应该可以找到.ssh的文件夹（主用户目录：C盘下用户的文件夹，然后打开你用户名的文件夹），里面有id_rsa和id_rsa.pub两个文件，这两个就是SSH Key的秘钥对，id_rsa是私钥，不能泄露出去，id_rsa.pub是公钥，可以放心地告诉任何人。</p>
<ol start="2">
<li>填写ssh key<br>登陆GitHub，点击setting，打开“SSH Keys”页面：然后，点“New SSH Key”，填上任意Title，在Key文本框里粘贴id_rsa.pub文件的内容。<img lazyload="" src="/images/loading.svg" data-src="/img/github/2.png"><br>现在就可以从这个仓库克隆出新的仓库，也可以把一个已有的本地仓库与之关联，然后，把本地仓库的内容推送到GitHub仓库。<br>3.现在在本地仓库运行命令</li>
</ol>
<div class="code-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ git remote add origin git@github.com:username/xxx.git</span><br></pre></td></tr></table></figure></div>

<p>username改成自己的用户名，git就是你刚刚创建的仓库名（其实这些命令创建仓库后GitHub就会提示你）</p>
<div class="code-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ git push -u origin master</span><br></pre></td></tr></table></figure></div>

<p>这样就推送完成了，以后的上传分为git add，git commit，git push</p>
<p>我讲的没有那么详细也可以看看<a class="link" href="https://www.liaoxuefeng.com/wiki/896043488029600">廖雪峰Git教程<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
]]></content>
      <categories>
        <category>Github</category>
      </categories>
      <tags>
        <tag>Github</tag>
      </tags>
  </entry>
  <entry>
    <title>Github无法访问问题解决</title>
    <url>/posts/47938/</url>
    <content><![CDATA[<h1 id="Github竟拒我于门外"><a href="#Github竟拒我于门外" class="headerlink" title="Github竟拒我于门外"></a>Github竟拒我于门外</h1><h3 id="手机可以访问但电脑不可以？"><a href="#手机可以访问但电脑不可以？" class="headerlink" title="手机可以访问但电脑不可以？"></a>手机可以访问但电脑不可以？</h3><p>至于为什么有了这篇帖子咱们还得从一只蝙蝠说起…</p>
<p><img lazyload="" src="/images/loading.svg" data-src="https://jhao413.oss-cn-beijing.aliyuncs.com/blog/17bf778d9f5e9a4eff93d7edc496dd1a.jpg"></p>
<p>从过年之后就再也没踏出过家门一步，吃了睡睡了吃的日子到了今天发现有一丝丝的颓废，于是满心欢喜的打开vs code写写代码，git命令到git push却发现无法提交。</p>
<p>于是我电脑尝试打开官网看看居然得到如下结果<br><img lazyload="" src="/images/loading.svg" data-src="https://jhao413.oss-cn-beijing.aliyuncs.com/blog/1.webp"><br>第一时间想到是不是要挂小飞机了，但是打开还是无济于事，抱着试一试的心态我用手机打开了GitHub的官网？？？手机没挂小飞机也能进？</p>
<h3 id="解决办法"><a href="#解决办法" class="headerlink" title="解决办法"></a>解决办法</h3><p>于是在网上找了各种办法，最后看到了一个靠谱的办法就是修改host文件（文件路径：C:\Windows\System32\drivers\etc\hosts）<br>将一下ip粘贴到hosts文件就可以了</p>
<div class="code-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="code"><pre><span class="line">192.30.253.113 github.com</span><br><span class="line">192.30.253.113 github.com</span><br><span class="line">192.30.253.118 gist.github.com</span><br><span class="line">192.30.253.119 gist.github.com</span><br></pre></td></tr></table></figure></div>

<p>与此同时问题就又来了，居然保存不了！他还给亲切的提示了你没有权限保存，请向管理员申请。自己管自己？<img lazyload="" src="/images/loading.svg" data-src="https://jhao413.oss-cn-beijing.aliyuncs.com/blog/1.jpg"></p>
<p>各种说通过右键属性更改权限的办法都试了，但是都没用。</p>
<p>最后一个有效的办法就是右键win的图标，找到Windows PowerSheell（管理员）注意是<strong>管理员</strong>！然后输入”notepad hosts”即可编辑保存了。<br>到此这个问题就完美解决啦</p>
]]></content>
      <categories>
        <category>Github</category>
      </categories>
      <tags>
        <tag>Github</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexo博客搭建</title>
    <url>/posts/41646/</url>
    <content><![CDATA[<h2 id="为什么选择Hexo"><a href="#为什么选择Hexo" class="headerlink" title="为什么选择Hexo"></a>为什么选择Hexo</h2><p>之前我也试过其他的博客系统，例如：typecho，wordpress等等，但是因为之前是高中，<br>也没有太多的精力去打理，这些博客都需要你有一台服务器或者是虚拟主机，还要一个域名。<br>自己没钱一下买一两年（当时也没必要，也不写啥东西）但是后来准备写的时候发现已经过期了。<br>重新买回来之后还是要重装一遍，而且之前的数据也没有了，但是hexo就不需要考虑这些啦。<br>你只需要在GitHub上有一个账号就足以。</p>
<h2 id="Hexo是什么"><a href="#Hexo是什么" class="headerlink" title="Hexo是什么"></a>Hexo是什么</h2><p>Hexo 是一个快速、简洁且高效的博客框架。Hexo 使用 Markdown（或其他渲染引擎）解析文章，在几秒内，即可利用靓丽的主题生成静态网页。</p>
<h2 id="Hexo搭建"><a href="#Hexo搭建" class="headerlink" title="Hexo搭建"></a>Hexo搭建</h2><h3 id="1、安装git"><a href="#1、安装git" class="headerlink" title="1、安装git"></a>1、安装git</h3><p>windows：到git官网下载安装即可，<a class="link" href="https://git-scm.com/downloads">Download git<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a>，<br>下载安装成功后鼠标右键就可以看到有Git Bash的命令行工具，以后使用git都在这进行。<br>安装成功后可以使用git –version查看git版本。(别的系统我也没用过，就只讲windows啦)</p>
<h3 id="2、安装Nodejs"><a href="#2、安装Nodejs" class="headerlink" title="2、安装Nodejs"></a>2、安装Nodejs</h3><p><a class="link" href="http://nodejs.cn/download/">Node.js下载地址<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a>，根据需要下载安装即可，安装完成之后可以打开命令行</p>
<div class="code-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="code"><pre><span class="line">node -v</span><br><span class="line">npm -v</span><br></pre></td></tr></table></figure></div>

<p>可以检查一下是否安装成功，安装成功会显示版本号</p>
<h3 id="3、安装hexo"><a href="#3、安装hexo" class="headerlink" title="3、安装hexo"></a>3、安装hexo</h3><p>首先创建一个文件夹，名字随意我这里就文件夹的名字就以blog来说了，打开你创建的文件夹，<br>右键点进git bash，输入以下命令</p>
<div class="code-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm install -g hexo-cli</span><br></pre></td></tr></table></figure></div>

<p>安装完后一样可以通过</p>
<div class="code-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="code"><pre><span class="line">hexo -v</span><br></pre></td></tr></table></figure></div>

<p>查看是否安装成功</p>
<p>初始化hexo</p>
<div class="code-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="code"><pre><span class="line">hexo init blog</span><br></pre></td></tr></table></figure></div>

<p>这里的blog是在你刚刚创建的blog文件夹的子文件夹，名字随意<br>接下来</p>
<div class="code-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="code"><pre><span class="line">cd blog</span><br><span class="line">npm install</span><br></pre></td></tr></table></figure></div>

<p>完成后大概会有以下文件，我的可能会多几个，不要在意，我后面又搞了其他东西</p>
<p><img lazyload="" src="/images/loading.svg" data-src="https://jhao413.oss-cn-beijing.aliyuncs.com/blog/20200227161239.png"></p>
<p>接着继续命令行里输入</p>
<div class="code-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="code"><pre><span class="line">hexo -g</span><br><span class="line">hexo server</span><br></pre></td></tr></table></figure></div>

<p>hexo -g意思是生成静态文件<br>hexo server启动服务<br>CTRL+c关闭服务<br>这时候浏览器输入localhost:4000就可以看到博客啦</p>
<h3 id="4、注册GitHub创建仓库"><a href="#4、注册GitHub创建仓库" class="headerlink" title="4、注册GitHub创建仓库"></a>4、注册GitHub创建仓库</h3><p><a class="link" href="https://github.com/">GitHub<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a>没有账号的话赶快去注册一个吧，<br>注册成功后创建一个仓库</p>
<p><img lazyload="" src="/images/loading.svg" data-src="https://jhao413.oss-cn-beijing.aliyuncs.com/blog/20200227161927.png"></p>
<p><img lazyload="" src="/images/loading.svg" data-src="https://jhao413.oss-cn-beijing.aliyuncs.com/blog/20200227162056.png"></p>
<p>仓库的名字不能随意写，username.github.io,username是你的用户名，写完后点击Create repository</p>
<h3 id="5、将SSh添加到GitHub"><a href="#5、将SSh添加到GitHub" class="headerlink" title="5、将SSh添加到GitHub"></a>5、将SSh添加到GitHub</h3><p>在命令行中输入以下内容（别照抄直接回车！）</p>
<div class="code-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="code"><pre><span class="line">git config --global user.name "name"</span><br><span class="line">git config --global user.email "email"</span><br></pre></td></tr></table></figure></div>

<p>name是你GitHub的用户名，Email是你GitHub的邮箱<br>然后创建ssh，一直回车就好了</p>
<div class="code-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="code"><pre><span class="line">ssh-keygen -t rsa -C"email"</span><br></pre></td></tr></table></figure></div>

<p>这里的Email和上面的同理<br>现在你的电脑里就有一个.ssh的文件夹</p>
<p><img lazyload="" src="/images/loading.svg" data-src="https://jhao413.oss-cn-beijing.aliyuncs.com/blog/20200227162818.png"></p>
<p>id_rsa是电脑的私人密钥，id_rsa.pub是公共密钥，当然是用公共密钥啦，现在将id_rsa.pub的内容复制到GitHub，<br>GitHub中在右上角打开setting，里面有SSH and GPG keys点击后new一个，名字随意</p>
<p><img lazyload="" src="/images/loading.svg" data-src="https://jhao413.oss-cn-beijing.aliyuncs.com/blog/20200227163223.png"></p>
<p>在gitbash中检查是否安装成功</p>
<h3 id="6、将hexo部署到GitHub"><a href="#6、将hexo部署到GitHub" class="headerlink" title="6、将hexo部署到GitHub"></a>6、将hexo部署到GitHub</h3><p>这时候打开刚刚的文件夹找到配置文件_config.yml，文件的最后修改为如下内容</p>
<div class="code-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="code"><pre><span class="line">deploy:</span><br><span class="line">  type: git</span><br><span class="line">  repo: https://github.com/UserName/UserName.github.io.git //username是你的用户名</span><br><span class="line">  branch: master</span><br></pre></td></tr></table></figure></div>

<p>这里有两种方式一种是https一种是.git的方式，第一种每次需要输入用户名密码，第二种不需要。<br>现在安装部署命令</p>
<div class="code-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure></div>

<p>现在只要依次执行以下命令即可</p>
<div class="code-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="code"><pre><span class="line">hexo clean</span><br><span class="line">hexo g</span><br><span class="line">hexo d</span><br></pre></td></tr></table></figure></div>

<p>hexo c(clean)清除你之前生成的东西，最好每次清理一下，以免发生不必要的错误<br>hexo g(generate)生成静态文件<br>hexo d(deploy)部署文章<br>最后出现INFO Deploy done:git就是部署成功了。现在打开<a class="link" href="http://username.github.io/">http://username.github.io<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a><br>（username是你的用户名）就可以看到你的博客啦<br>你的博客就成功部署了<br>关于hexo的更多操作可以加我询问哈~</p>
]]></content>
      <categories>
        <category>Hexo</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>mini-zustand</title>
    <url>/posts/mini-zustand/</url>
    <content><![CDATA[<h3 id="什么是-Zustand"><a href="#什么是-Zustand" class="headerlink" title="什么是 Zustand"></a>什么是 Zustand</h3><p><a class="link" href="https://zustand-demo.pmnd.rs/">Zustand<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a> 是一个轻量级的状态管理库，在写<a class="link" href="https://leaf-nest.vercel.app/">Leaf Nest<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a>时需要使用到状态管理库所以了解了一下，相比于 Redux，Zustand 更加轻量和简单，一个简单的 demo 就能立刻明白如何使用了。（官网做的也真好看呐）</p>
<p>Zustand 在近年来所有新兴的状态管理库中算是最流行的之一，目前 Github star 数已经超过了 50k，在 React 状态管理库中应该是仅次于 Redux（61k）。</p>
<p>所以花了点时间简单学习了一下 zustand，写了<a class="link" href="https://github.com/jhao0413/mini-zustand"> mini-zustand<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a> 实现核心功能。</p>
<h3 id="mini-zustand"><a href="#mini-zustand" class="headerlink" title="mini-zustand"></a>mini-zustand</h3><p>在 zustand 中核心功能代码主要在两个文件中：</p>
<ol>
<li><a class="link" href="https://github.com/pmndrs/zustand/blob/main/src/vanilla.ts">vanilla.ts<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a><ul>
<li>createStoreImpl 的具体实现，包含了核心的状态管理逻辑，如：getState、setState、subscribe 等。</li>
</ul>
</li>
<li><a class="link" href="https://github.com/pmndrs/zustand/blob/main/src/react.ts">react.ts<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a><ul>
<li>主要是 React 相关的逻辑，包含了 useStore 的具体实现。</li>
<li>使用了 React 的 useSyncExternalStore 来订阅 store 的变化。<blockquote>
<p>这里扩展一下，<a class="link" href="https://zh-hans.react.dev/reference/react/useSyncExternalStore">useSyncExternalStore<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a> 是 <a class="link" href="https://react.dev/blog/2022/03/29/react-v18#usesyncexternalstore">React 18 新增的一个 Hook<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a>，用于订阅外部数据源的变化。它的主要作用是让我们可以在组件中订阅外部数据源（如：Redux、Zustand 等）的变化，并在数据源发生变化时自动更新组件。</p>
</blockquote>
</li>
</ul>
</li>
</ol>
<h4 id="vanilla-ts"><a href="#vanilla-ts" class="headerlink" title="vanilla.ts"></a>vanilla.ts</h4><div class="code-container" data-rel="Ts"><figure class="iseeu highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">createStoreImpl</span> = (<span class="params">createState</span>) =&gt; {</span><br><span class="line">  <span class="comment">// 获取 createState 返回值类型</span></span><br><span class="line">  <span class="keyword">type</span> <span class="title class_">TState</span> = <span class="title class_">ReturnType</span>&lt;<span class="keyword">typeof</span> createState&gt;;</span><br><span class="line">  <span class="comment">// 使用set存储监听器</span></span><br><span class="line">  <span class="keyword">type</span> <span class="title class_">Listener</span> = <span class="function">(<span class="params">state: TState, prevState: TState</span>) =&gt;</span> <span class="built_in">void</span>;</span><br><span class="line">  <span class="keyword">let</span> <span class="attr">state</span>: <span class="title class_">TState</span>;</span><br><span class="line">  <span class="keyword">const</span> <span class="attr">listeners</span>: <span class="title class_">Set</span>&lt;<span class="title class_">Listener</span>&gt; = <span class="keyword">new</span> <span class="title class_">Set</span>();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="attr">setState</span>: <span class="title class_">StoreApi</span>&lt;<span class="title class_">TState</span>&gt;[<span class="string">"setState"</span>] = <span class="function">(<span class="params">partial, replace</span>) =&gt;</span> {</span><br><span class="line">    <span class="comment">// 如果partial是一个函数，则先执行partial函数，然后再赋值给nextState</span></span><br><span class="line">    <span class="keyword">const</span> nextState = <span class="keyword">typeof</span> partial === <span class="string">"function"</span> ? <span class="title function_">partial</span>(state) : partial;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 判断nextState和state是否是同一个对象，如果不是则更新state</span></span><br><span class="line">    <span class="keyword">if</span> (!<span class="title class_">Object</span>.<span class="title function_">is</span>(nextState, state)) {</span><br><span class="line">      <span class="keyword">const</span> prevState = state;</span><br><span class="line"></span><br><span class="line">      state =</span><br><span class="line">        <span class="comment">// 如果replace为true，则直接赋值给nextState</span></span><br><span class="line">        <span class="comment">// 如果replace为false，则将nextState和state合并</span></span><br><span class="line">        replace ?? (<span class="keyword">typeof</span> nextState !== <span class="string">"object"</span> || nextState === <span class="literal">null</span>)</span><br><span class="line">          ? (nextState <span class="keyword">as</span> <span class="title class_">TState</span>)</span><br><span class="line">          : <span class="title class_">Object</span>.<span class="title function_">assign</span>({}, state, nextState);</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 遍历listeners，执行每个listener</span></span><br><span class="line">      listeners.<span class="title function_">forEach</span>(<span class="function">(<span class="params">listener</span>) =&gt;</span> <span class="title function_">listener</span>(state, prevState));</span><br><span class="line">    }</span><br><span class="line">  };</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="attr">getState</span>: <span class="title class_">StoreApi</span>&lt;<span class="title class_">TState</span>&gt;[<span class="string">"getState"</span>] = <span class="function">() =&gt;</span> state;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="attr">subscribe</span>: <span class="title class_">StoreApi</span>&lt;<span class="title class_">TState</span>&gt;[<span class="string">"subscribe"</span>] = <span class="function">(<span class="params">listener</span>) =&gt;</span> {</span><br><span class="line">    <span class="comment">// 添加监听器</span></span><br><span class="line">    listeners.<span class="title function_">add</span>(listener);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 返回取消订阅功能</span></span><br><span class="line">    <span class="keyword">return</span> <span class="function">() =&gt;</span> listeners.<span class="title function_">delete</span>(listener);</span><br><span class="line">  };</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="attr">getInitialState</span>: <span class="title class_">StoreApi</span>&lt;<span class="title class_">TState</span>&gt;[<span class="string">"getInitialState"</span>] = <span class="function">() =&gt;</span> initialState;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> api = { setState, getState, subscribe, getInitialState };</span><br><span class="line">  <span class="comment">// 初始化state</span></span><br><span class="line">  <span class="keyword">const</span> initialState = (state = <span class="title function_">createState</span>(setState, getState, api));</span><br><span class="line">  <span class="keyword">return</span> api;</span><br><span class="line">};</span><br></pre></td></tr></table></figure></div>

<h4 id="react-ts"><a href="#react-ts" class="headerlink" title="react.ts"></a>react.ts</h4><div class="code-container" data-rel="Ts"><figure class="iseeu highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">"react"</span>;</span><br><span class="line"><span class="keyword">import</span> { createStore } <span class="keyword">from</span> <span class="string">"./vanilla.ts"</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="keyword">type</span> { <span class="title class_">StoreApi</span> } <span class="keyword">from</span> <span class="string">"./vanilla.ts"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">ReadonlyStoreApi</span>&lt;T&gt; = <span class="title class_">Pick</span>&lt;<span class="title class_">StoreApi</span>&lt;T&gt;, <span class="string">"getState"</span> | <span class="string">"getInitialState"</span> | <span class="string">"subscribe"</span>&gt;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> identity = &lt;T&gt;(<span class="attr">arg</span>: T): <span class="function"><span class="params">T</span> =&gt;</span> arg;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">useStore</span>(<span class="params">api</span>);</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">useStore</span>(<span class="params">api, selector</span>);</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> useStore&lt;<span class="title class_">TState</span>, <span class="title class_">StateSlice</span>&gt;(</span><br><span class="line">  <span class="attr">api</span>: <span class="title class_">ReadonlyStoreApi</span>&lt;<span class="title class_">TState</span>&gt;,</span><br><span class="line">  <span class="attr">selector</span>: <span class="function">(<span class="params">state: TState</span>) =&gt;</span> <span class="title class_">StateSlice</span> = identity <span class="keyword">as</span> <span class="built_in">any</span></span><br><span class="line">) {</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * useSyncExternalStore 订阅外部 store 的 React Hook</span></span><br><span class="line"><span class="comment">   * useSyncExternalStore(subscribe, getSnapshot, getServerSnapshot?)</span></span><br><span class="line"><span class="comment">   * subscribe：一个函数，接收一个单独的 callback 参数并把它订阅到 store 上。</span></span><br><span class="line"><span class="comment">   * getSnapshot：一个函数，返回组件需要的 store 中的数据快照。</span></span><br><span class="line"><span class="comment">   * 可选 getServerSnapshot：一个函数，返回 store 中数据的初始快照。</span></span><br><span class="line"><span class="comment">   * React 会用这些函数来保持组件订阅到 store 并在它改变时重新渲染</span></span><br><span class="line"><span class="comment">   * https://zh-hans.react.dev/reference/react/useSyncExternalStore</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">const</span> slice = <span class="title class_">React</span>.<span class="title function_">useSyncExternalStore</span>(</span><br><span class="line">    api.<span class="property">subscribe</span>,</span><br><span class="line">    <span class="function">() =&gt;</span> <span class="title function_">selector</span>(api.<span class="title function_">getState</span>()),</span><br><span class="line">    <span class="function">() =&gt;</span> <span class="title function_">selector</span>(api.<span class="title function_">getInitialState</span>())</span><br><span class="line">  );</span><br><span class="line">  <span class="comment">// 为自定义 Hook 添加调试信息，方便 React DevTools 显示</span></span><br><span class="line">  <span class="title class_">React</span>.<span class="title function_">useDebugValue</span>(slice);</span><br><span class="line">  <span class="keyword">return</span> slice;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">createImpl</span> = (<span class="params">createState</span>) =&gt; {</span><br><span class="line">  <span class="keyword">const</span> api = <span class="title function_">createStore</span>(createState);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 绑定 store api 到 useBoundStore</span></span><br><span class="line">  <span class="keyword">const</span> <span class="attr">useBoundStore</span>: <span class="built_in">any</span> = <span class="function">(<span class="params">selector?: <span class="built_in">any</span></span>) =&gt;</span> <span class="title function_">useStore</span>(api, selector);</span><br><span class="line"></span><br><span class="line">  <span class="title class_">Object</span>.<span class="title function_">assign</span>(useBoundStore, api);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> useBoundStore;</span><br><span class="line">};</span><br></pre></td></tr></table></figure></div>

<blockquote>
<p>参考链接</p>
</blockquote>
<ul>
<li><a class="link" href="https://github.com/pmndrs/zustand">Zustand<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></li>
<li><a class="link" href="https://www.shymean.com/article/zustand%E4%BD%BF%E7%94%A8%E5%92%8C%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90">zustand 使用和源码分析<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></li>
</ul>
]]></content>
      <categories>
        <category>Frontnd</category>
      </categories>
      <tags>
        <tag>Frontnd</tag>
      </tags>
  </entry>
  <entry>
    <title>vue cli 解决跨域 线上 nginx 反向代理配置</title>
    <url>/posts/61269/</url>
    <content><![CDATA[<h2 id="vue-cli-解决跨域-线上-nginx-反向代理配置"><a href="#vue-cli-解决跨域-线上-nginx-反向代理配置" class="headerlink" title="vue cli 解决跨域 线上 nginx 反向代理配置"></a>vue cli 解决跨域 线上 nginx 反向代理配置</h2><h4 id="1、开发环境跨域"><a href="#1、开发环境跨域" class="headerlink" title="1、开发环境跨域"></a>1、开发环境跨域</h4><p>在<strong>vue cli2</strong>中，在/config/index.js里找到proxyTable开启代理changeOrigin:ture;</p>
<div class="code-container" data-rel="Javascript"><figure class="iseeu highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="attr">proxyTable</span>: {</span><br><span class="line">    <span class="comment">//解决</span></span><br><span class="line">    <span class="attr">publicPath</span>: <span class="string">"./"</span>,</span><br><span class="line">      <span class="string">'/api'</span>:{</span><br><span class="line">        <span class="attr">target</span>:<span class="string">'http://xx.com'</span>,</span><br><span class="line">        <span class="attr">changeOrigin</span>:<span class="literal">true</span>,</span><br><span class="line">        <span class="attr">pathRewrite</span>:{</span><br><span class="line">            <span class="string">'^/api'</span>:<span class="string">'/api'</span></span><br><span class="line">        }</span><br><span class="line">      }</span><br><span class="line">    },</span><br></pre></td></tr></table></figure></div>

<p>在<strong>vue cli3</strong>中的vue.config.js（如果没有可以自行创建。注：与package.json同级目录）修改</p>
<div class="code-container" data-rel="Javascript"><figure class="iseeu highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = {</span><br><span class="line">  <span class="attr">publicPath</span>: <span class="string">"./"</span>,</span><br><span class="line">  <span class="attr">devServer</span>: {</span><br><span class="line">    <span class="attr">proxy</span>: {</span><br><span class="line">      <span class="string">"/api"</span>: {</span><br><span class="line">        <span class="attr">target</span>: <span class="string">"http://xx.com"</span>,</span><br><span class="line">        <span class="attr">changeOrigin</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">ws</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">secure</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="attr">pathRewrite</span>: {</span><br><span class="line">          <span class="string">"^/api"</span>: <span class="string">""</span>,</span><br><span class="line">        },</span><br><span class="line">      },</span><br><span class="line">    },</span><br><span class="line">  },</span><br><span class="line">};</span><br></pre></td></tr></table></figure></div>

<h4 id="2、nginx反向代理设置"><a href="#2、nginx反向代理设置" class="headerlink" title="2、nginx反向代理设置"></a>2、nginx反向代理设置</h4><p>如果使用宝塔控制面板，请在当前站点文件夹下进行配置（位置如下图所示）</p>
<p><img lazyload="" src="/images/loading.svg" data-src="https://jhao413.oss-cn-beijing.aliyuncs.com/blog/20200924151731.png"></p>
<p>在配置文件（xx.conf）的server{}中按需加入如下代码：</p>
<div class="code-container" data-rel="Javascript"><figure class="iseeu highlight javascript"><table><tr><td class="code"><pre><span class="line">location /api/ {</span><br><span class="line">        # 把 /api 路径下的请求转发给真正的后端服务器</span><br><span class="line">        proxy_pass <span class="attr">http</span>:<span class="comment">//xx.xx.xx.xx:3000/;</span></span><br><span class="line">        #注意端口后需加/</span><br><span class="line"></span><br><span class="line">        # 把host头传过去，后端服务程序将收到your.<span class="property">domain</span>.<span class="property">name</span>, 否则收到的是<span class="attr">localhost</span>:<span class="number">8080</span></span><br><span class="line">        proxy_set_header <span class="title class_">Host</span> $http_host;</span><br><span class="line"></span><br><span class="line">        # 把cookie中的path部分从/api替换成/service</span><br><span class="line">        proxy_cookie_path /api /;</span><br><span class="line"></span><br><span class="line">        # 把cookie的path部分从<span class="attr">localhost</span>:<span class="number">8080</span>替换成your.<span class="property">domain</span>.<span class="property">name</span></span><br><span class="line">        proxy_cookie_domain <span class="attr">localhost</span>:<span class="number">80</span> <span class="attr">http</span>:<span class="comment">//xx.xx.xx.xx:3000/;</span></span><br><span class="line">    }</span><br></pre></td></tr></table></figure></div>
]]></content>
      <categories>
        <category>Vue</category>
      </categories>
      <tags>
        <tag>Vue</tag>
      </tags>
  </entry>
  <entry>
    <title>wangeditor</title>
    <url>/posts/28431/</url>
    <content><![CDATA[<h2 id="wangeditor基本使用"><a href="#wangeditor基本使用" class="headerlink" title="wangeditor基本使用"></a>wangeditor基本使用</h2><p>最近做公安项目的时候需要做一个富文本编辑器实现文章编辑，图片上传等功能。一开始选择了quill，但是做到最后在图片上传的时候出现了跨域的问题（现在回想起来应该是当时后端接口没有写好），当时就想换个别的富文本编辑器试试，最后找到了wangeditor，主要看上了它的轻量，中文文档等等。</p>
<h5 id="1、vue中安装wangEditor"><a href="#1、vue中安装wangEditor" class="headerlink" title="1、vue中安装wangEditor"></a>1、vue中安装wangEditor</h5><p>使用npm安装：npm install wangeditor –save</p>
<h5 id="2、创建公共组件"><a href="#2、创建公共组件" class="headerlink" title="2、创建公共组件"></a>2、创建公共组件</h5><p>在components中创建wangEnduit.vue文件</p>
<div class="code-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template lang="html"&gt;</span><br><span class="line">  &lt;div class="editor"&gt;</span><br><span class="line">    &lt;div ref="toolbar" class="toolbar"&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div ref="editor" class="text"&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">  import E from 'wangeditor'</span><br><span class="line">  export default {</span><br><span class="line">    name: 'editoritem',</span><br><span class="line">    data() {</span><br><span class="line">      return {</span><br><span class="line">        // uploadPath,</span><br><span class="line">        editor: null,</span><br><span class="line">        info_: null</span><br><span class="line">      }</span><br><span class="line">    },</span><br><span class="line">    model: {</span><br><span class="line">      prop: 'value',</span><br><span class="line">      event: 'change'</span><br><span class="line">    },</span><br><span class="line">    props: {</span><br><span class="line">      value: {</span><br><span class="line">        type: String,</span><br><span class="line">        default: ''</span><br><span class="line">      },</span><br><span class="line">      isClear: {</span><br><span class="line">        type: Boolean,</span><br><span class="line">        default: false</span><br><span class="line">      }</span><br><span class="line">    },</span><br><span class="line">    watch: {</span><br><span class="line">      isClear(val) {</span><br><span class="line">        // 触发清除文本域内容</span><br><span class="line">        if (val) {</span><br><span class="line">          this.editor.txt.clear()</span><br><span class="line">          this.info_ = null</span><br><span class="line">        }</span><br><span class="line">      },</span><br><span class="line">      value: function(value) {</span><br><span class="line">        if (value !== this.editor.txt.html()) {</span><br><span class="line">          this.editor.txt.html(this.value)</span><br><span class="line">        }</span><br><span class="line">      }</span><br><span class="line">      //value为编辑框输入的内容，这里我监听了一下值，当父组件调用得时候，如果给value赋值了，子组件将会显示父组件赋给的值</span><br><span class="line">    },</span><br><span class="line">    mounted() {</span><br><span class="line">      this.seteditor()</span><br><span class="line">      this.editor.txt.html(this.value)</span><br><span class="line">    },</span><br><span class="line">    methods: {</span><br><span class="line">      seteditor() {</span><br><span class="line">        this.editor = new E(this.$refs.toolbar, this.$refs.editor)</span><br><span class="line">        console.log(this.editor);</span><br><span class="line">      //editor.config这里我使用的是wangeditor4，如果你使用的是wangeditor3将editor.config改为editor.customConfig即可</span><br><span class="line">        this.editor.config.uploadImgShowBase64 = false // base 64 存储图片</span><br><span class="line">        this.editor.config.uploadImgServer = 'http://127.0.0.1:8081/upload/img'// 配置服务器端地址</span><br><span class="line">        this.editor.config.uploadImgHeaders = { }// 自定义 header</span><br><span class="line">        this.editor.config.uploadFileName = 'img' // 后端接受上传文件的参数名</span><br><span class="line">        this.editor.config.uploadImgMaxSize = 2 * 1024 * 1024 // 将图片大小限制为 2M</span><br><span class="line">        this.editor.config.uploadImgMaxLength = 6 // 限制一次最多上传 3 张图片</span><br><span class="line">        this.editor.config.uploadImgTimeout = 3 * 60 * 1000 // 设置超时时间</span><br><span class="line"></span><br><span class="line">        // 配置菜单</span><br><span class="line">        this.editor.config.menus = [</span><br><span class="line">          'head', // 标题</span><br><span class="line">          'bold', // 粗体</span><br><span class="line">          'fontSize', // 字号</span><br><span class="line">          'fontName', // 字体</span><br><span class="line">          'italic', // 斜体</span><br><span class="line">          'underline', // 下划线</span><br><span class="line">          'strikeThrough', // 删除线</span><br><span class="line">          'foreColor', // 文字颜色</span><br><span class="line">          'backColor', // 背景颜色</span><br><span class="line">          'link', // 插入链接</span><br><span class="line">          'list', // 列表</span><br><span class="line">          'justify', // 对齐方式</span><br><span class="line">          'quote', // 引用</span><br><span class="line">          'emoticon', // 表情</span><br><span class="line">          'image', // 插入图片</span><br><span class="line">          'table', // 表格</span><br><span class="line">          'video', // 插入视频</span><br><span class="line">          'code', // 插入代码</span><br><span class="line">          'undo', // 撤销</span><br><span class="line">          'redo', // 重复</span><br><span class="line">          'fullscreen' // 全屏</span><br><span class="line">        ]</span><br><span class="line"></span><br><span class="line">        this.editor.config.uploadImgHooks = {</span><br><span class="line">          fail: (xhr, editor, result) =&gt; {</span><br><span class="line">            // 插入图片失败回调</span><br><span class="line">          },</span><br><span class="line">          success: (xhr, editor, result) =&gt; {</span><br><span class="line">            // 图片上传成功回调</span><br><span class="line">          },</span><br><span class="line">          timeout: (xhr, editor) =&gt; {</span><br><span class="line">            // 网络超时的回调</span><br><span class="line">          },</span><br><span class="line">          error: (xhr, editor) =&gt; {</span><br><span class="line">            // 图片上传错误的回调</span><br><span class="line">          },</span><br><span class="line">          customInsert: (insertImg, result, editor) =&gt; {</span><br><span class="line">            // 图片上传成功，插入图片的回调</span><br><span class="line">            //result为上传图片成功的时候返回的数据，这里我打印了一下发现后台返回的是data：[{url:"路径的形式"},...]</span><br><span class="line">            // console.log(result.data[0].url)</span><br><span class="line">            //insertImg()为插入图片的函数</span><br><span class="line">             //循环插入图片</span><br><span class="line">            // for (let i = 0; i &lt; 1; i++) {</span><br><span class="line">              console.log(result.data.url)</span><br><span class="line">              let url = result.data.url</span><br><span class="line">              insertImg(url)</span><br><span class="line">            // }</span><br><span class="line">          }</span><br><span class="line">        }</span><br><span class="line">        this.editor.config.onchange = (html) =&gt; {</span><br><span class="line">          this.info_ = html // 绑定当前逐渐地值</span><br><span class="line">          this.$emit('change', this.info_) // 将内容同步到父组件中</span><br><span class="line">        }</span><br><span class="line">        // 创建富文本编辑器</span><br><span class="line">        this.editor.create()</span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang="css"&gt;</span><br><span class="line">  .editor {</span><br><span class="line">    width: 100%;</span><br><span class="line">    margin: 0 auto;</span><br><span class="line">    position: relative;</span><br><span class="line">    z-index: 0;</span><br><span class="line">  }</span><br><span class="line">  .toolbar {</span><br><span class="line">    border: 1px solid #ccc;</span><br><span class="line">  }</span><br><span class="line">  .text {</span><br><span class="line">    border: 1px solid #ccc;</span><br><span class="line">    min-height: 500px;</span><br><span class="line">  }</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure></div>

<h5 id="3-在父组件中调用"><a href="#3-在父组件中调用" class="headerlink" title="3.在父组件中调用"></a>3.在父组件中调用</h5><div class="code-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&lt;div&gt;</span><br><span class="line">&lt;editor-bar v-model="detail" :isClear="isClear" @change="change"&gt;&lt;/editor-bar&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import EditorBar from '../components/wangEnduit'</span><br><span class="line">export default {</span><br><span class="line">components: { EditorBar },</span><br><span class="line">data() {</span><br><span class="line">      return {</span><br><span class="line">        isClear: false,</span><br><span class="line">        detail:""</span><br><span class="line">        }</span><br><span class="line">      },  </span><br><span class="line">methods: {</span><br><span class="line">  change(val) {</span><br><span class="line">      console.log(val)</span><br><span class="line">      </span><br><span class="line">    },</span><br><span class="line"> }</span><br><span class="line">}</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure></div>

<p>到这里前端代码就完成了，接下来是后端代码</p>
<h5 id="4、nodejs代码"><a href="#4、nodejs代码" class="headerlink" title="4、nodejs代码"></a>4、nodejs代码</h5><p>下面是我所使用的包</p>
<div class="code-container" data-rel="Javascript"><figure class="iseeu highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">"express"</span>);</span><br><span class="line"><span class="keyword">const</span> server = <span class="title function_">express</span>();</span><br><span class="line"><span class="keyword">const</span> cors = <span class="built_in">require</span>(<span class="string">"cors"</span>);</span><br><span class="line"><span class="keyword">var</span> bodyParser = <span class="built_in">require</span>(<span class="string">"body-parser"</span>);</span><br><span class="line"><span class="keyword">var</span> multer = <span class="built_in">require</span>(<span class="string">"multer"</span>);</span><br></pre></td></tr></table></figure></div>

<div class="code-container" data-rel="Javascript"><figure class="iseeu highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">'express'</span>);</span><br><span class="line"><span class="keyword">var</span> multer = <span class="built_in">require</span>(<span class="string">"multer"</span>);</span><br><span class="line"><span class="keyword">var</span> app = <span class="title function_">express</span>();</span><br><span class="line"><span class="keyword">var</span> bodyParse = <span class="built_in">require</span>(<span class="string">'body-parser'</span>);</span><br><span class="line"> </span><br><span class="line"><span class="comment">// 设置图片存储路径</span></span><br><span class="line"><span class="keyword">var</span> storage = multer.<span class="title function_">diskStorage</span>({</span><br><span class="line">  <span class="attr">destination</span>: <span class="keyword">function</span> (<span class="params">req, file, cb</span>) {</span><br><span class="line">    <span class="title function_">cb</span>(<span class="literal">null</span>, <span class="string">'./images'</span>);</span><br><span class="line">  },</span><br><span class="line">  <span class="attr">filename</span>: <span class="keyword">function</span> (<span class="params">req, file, cb</span>) {</span><br><span class="line">    <span class="title function_">cb</span>(<span class="literal">null</span>, <span class="string">`<span class="subst">${<span class="built_in">Date</span>.now()}</span>-<span class="subst">${file.originalname}</span>`</span>)</span><br><span class="line">  }</span><br><span class="line">})</span><br><span class="line"></span><br><span class="line"><span class="comment">// 添加配置文件到muler对象。</span></span><br><span class="line"><span class="keyword">var</span> upload = <span class="title function_">multer</span>({</span><br><span class="line">  <span class="attr">storage</span>: storage</span><br><span class="line">});</span><br><span class="line"><span class="keyword">var</span> imgBaseUrl = <span class="string">'../'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建 application/x-www-form-urlencoded 解析</span></span><br><span class="line"><span class="keyword">var</span> urlencodedParser = bodyParser.<span class="title function_">urlencoded</span>({</span><br><span class="line">  <span class="attr">extended</span>: <span class="literal">false</span>,</span><br><span class="line">});</span><br><span class="line"></span><br><span class="line"><span class="comment">//1.获取路由中间件对象</span></span><br><span class="line"><span class="keyword">let</span> router = express.<span class="title class_">Router</span>();</span><br><span class="line">server.<span class="title function_">use</span>(<span class="title function_">cors</span>());</span><br><span class="line"></span><br><span class="line"><span class="comment">//图片，express设置文件相对路径</span></span><br><span class="line">server.<span class="title function_">use</span>(express.<span class="title function_">static</span>(<span class="string">'images'</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// 解决跨域问题</span></span><br><span class="line">server.<span class="title function_">all</span>(<span class="string">'*'</span>, <span class="keyword">function</span> (<span class="params">req, res, next</span>) {</span><br><span class="line">  res.<span class="title function_">header</span>(<span class="string">'Access-Control-Allow-Origin'</span>, <span class="string">'*'</span>);</span><br><span class="line">  res.<span class="title function_">header</span>(<span class="string">'Access-Control-Allow-Headers'</span>, <span class="string">'Content-Type, Content-Length, Authorization, Accept, X-Requested-With , yourHeaderFeild'</span>);</span><br><span class="line">  res.<span class="title function_">header</span>(<span class="string">'Access-Control-Allow-Methods'</span>, <span class="string">'PUT, POST, GET, DELETE, OPTIONS'</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (req.<span class="property">method</span> == <span class="string">'OPTIONS'</span>) {</span><br><span class="line">    res.<span class="title function_">send</span>(<span class="number">200</span>);</span><br><span class="line">  } <span class="keyword">else</span> {</span><br><span class="line">    <span class="title function_">next</span>();</span><br><span class="line">  }</span><br><span class="line">});</span><br><span class="line"> </span><br><span class="line"><span class="comment">// 文件上传请求处理，upload.array 支持多文件上传，第二个参数是上传文件数目</span></span><br><span class="line">.<span class="title function_">post</span>(<span class="string">'/upload/img'</span>, upload.<span class="title function_">array</span>(<span class="string">'img'</span>, <span class="number">2</span>), <span class="keyword">function</span> (<span class="params">req, res</span>) {</span><br><span class="line">    <span class="comment">// 读取上传的图片信息</span></span><br><span class="line">    <span class="keyword">var</span> files = req.<span class="property">files</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 设置返回结果</span></span><br><span class="line">    <span class="keyword">var</span> result = {};</span><br><span class="line">    <span class="keyword">if</span> (!files[<span class="number">0</span>]) {</span><br><span class="line">      result.<span class="property">code</span> = <span class="number">1</span>;</span><br><span class="line">      result.<span class="property">errMsg</span> = <span class="string">'上传失败'</span>;</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">      result.<span class="property">code</span> = <span class="number">0</span>;</span><br><span class="line">      result.<span class="property">data</span> = {</span><br><span class="line">        <span class="attr">url</span>: <span class="string">"http://127.0.0.1:8081"</span> + files[<span class="number">0</span>].<span class="property">path</span>.<span class="title function_">split</span>(<span class="string">"images"</span>)[<span class="number">1</span>]</span><br><span class="line">      }</span><br><span class="line">      result.<span class="property">errMsg</span> = <span class="string">'上传成功'</span>;</span><br><span class="line">    }</span><br><span class="line">    res.<span class="title function_">end</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(result));</span><br><span class="line">  })</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">server.<span class="title function_">use</span>(router);</span><br><span class="line">server.<span class="title function_">listen</span>(<span class="number">8081</span>, <span class="keyword">function</span> (<span class="params"></span>) {</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">"服务已运行在：http://127.0.0.1:8081/"</span>);</span><br><span class="line">});</span><br></pre></td></tr></table></figure></div>

<p>大功告成~</p>
<p>这里可以参考两篇文章：</p>
<p><a class="link" href="https://blog.csdn.net/qq_33594380/article/details/80164381">https://blog.csdn.net/qq_33594380/article/details/80164381<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<p><a class="link" href="https://blog.csdn.net/ciwei0605/article/details/104402138">https://blog.csdn.net/ciwei0605/article/details/104402138<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
]]></content>
      <categories>
        <category>Vue</category>
      </categories>
      <tags>
        <tag>Vue</tag>
      </tags>
  </entry>
  <entry>
    <title>vue+element+阿里云oss图片上传</title>
    <url>/posts/63894/</url>
    <content><![CDATA[<h3 id="vue-element-阿里云oss图片上传"><a href="#vue-element-阿里云oss图片上传" class="headerlink" title="vue+element+阿里云oss图片上传"></a>vue+element+阿里云oss图片上传</h3><h4 id="1、npm安装ali-oss"><a href="#1、npm安装ali-oss" class="headerlink" title="1、npm安装ali-oss"></a>1、npm安装ali-oss</h4><div class="code-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm install ali-oss</span><br></pre></td></tr></table></figure></div>

<h4 id="2、使用element的-upload-组件进行上传"><a href="#2、使用element的-upload-组件进行上传" class="headerlink" title="2、使用element的 upload 组件进行上传"></a>2、使用element的 upload 组件进行上传</h4><p><em>html部分如下</em></p>
<div class="code-container" data-rel="Html"><figure class="iseeu highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"home"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-upload</span></span></span><br><span class="line"><span class="tag">      <span class="attr">class</span>=<span class="string">"upload-demo"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">action</span></span></span><br><span class="line"><span class="tag">      <span class="attr">:http-request</span>=<span class="string">"fnUploadRequest"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">list-type</span>=<span class="string">"picture-card"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">:on-preview</span>=<span class="string">"handlePictureCardPreview"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">:on-remove</span>=<span class="string">"handleRemove"</span></span></span><br><span class="line"><span class="tag">    &gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"el-icon-plus"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-upload</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-dialog</span> <span class="attr">:visible.sync</span>=<span class="string">"dialogVisible"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">img</span> <span class="attr">width</span>=<span class="string">"100%"</span> <span class="attr">:src</span>=<span class="string">"dialogImageUrl"</span> <span class="attr">alt</span>=<span class="string">""</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-dialog</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

<p><em>js部分如下</em></p>
<div class="code-container" data-rel="Javascript"><figure class="iseeu highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="variable constant_">OSS</span> <span class="keyword">from</span> <span class="string">"ali-oss"</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> {</span><br><span class="line">  <span class="title function_">data</span>(<span class="params"></span>) {</span><br><span class="line">    <span class="keyword">return</span> {</span><br><span class="line">      <span class="attr">dialogImageUrl</span>: <span class="string">""</span>,</span><br><span class="line">      <span class="attr">dialogVisible</span>: <span class="literal">false</span>,</span><br><span class="line">      <span class="attr">disabled</span>: <span class="literal">false</span>,</span><br><span class="line">      <span class="attr">loading</span>: <span class="literal">false</span>,</span><br><span class="line">      <span class="attr">fileList</span>: [],</span><br><span class="line">    };</span><br><span class="line">  },</span><br><span class="line">  <span class="attr">methods</span>: {</span><br><span class="line">    <span class="title function_">handleRemove</span>(<span class="params">file, fileList</span>) {</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(file, fileList);</span><br><span class="line">    },</span><br><span class="line">    <span class="title function_">handlePictureCardPreview</span>(<span class="params">file</span>) {</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">dialogImageUrl</span> = file.<span class="property">url</span>;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">dialogVisible</span> = <span class="literal">true</span>;</span><br><span class="line">    },</span><br><span class="line">    <span class="keyword">async</span> <span class="title function_">fnUploadRequest</span>(<span class="params">option</span>) {</span><br><span class="line">      <span class="keyword">try</span> {</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">"参数"</span>, option);</span><br><span class="line">        <span class="comment">// 获取OSS配置信息</span></span><br><span class="line">        <span class="keyword">let</span> client = <span class="keyword">new</span> <span class="title function_">OSS</span>({</span><br><span class="line">          <span class="attr">secure</span>: <span class="literal">true</span>,</span><br><span class="line">          <span class="attr">accessKeyId</span>: <span class="string">""</span>, <span class="comment">//阿里云AccessKey ID</span></span><br><span class="line">          <span class="attr">accessKeySecret</span>: <span class="string">""</span>, <span class="comment">//阿里云accessKeySecret</span></span><br><span class="line">          <span class="attr">bucket</span>: <span class="string">""</span>, <span class="comment">//bucket域名</span></span><br><span class="line">          <span class="attr">region</span>: <span class="string">""</span>, <span class="comment">//oss地区，如：oss-cn-beijing。（注：不用加.aliyun.com）</span></span><br><span class="line">        });</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">loading</span> = <span class="literal">true</span>;</span><br><span class="line">          </span><br><span class="line">          <span class="comment">//获取当前时间（为了保证不出现重复文件名导致文件覆盖）</span></span><br><span class="line">        <span class="keyword">function</span> <span class="title function_">getFormatDate</span>(<span class="params"></span>) {</span><br><span class="line">          <span class="keyword">var</span> date = <span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line">          <span class="keyword">var</span> month = date.<span class="title function_">getMonth</span>() + <span class="number">1</span>;</span><br><span class="line">          <span class="keyword">var</span> strDate = date.<span class="title function_">getDate</span>();</span><br><span class="line">          <span class="keyword">if</span> (month &gt;= <span class="number">1</span> &amp;&amp; month &lt;= <span class="number">9</span>) {</span><br><span class="line">            month = <span class="string">"0"</span> + month;</span><br><span class="line">          }</span><br><span class="line">          <span class="keyword">if</span> (strDate &gt;= <span class="number">0</span> &amp;&amp; strDate &lt;= <span class="number">9</span>) {</span><br><span class="line">            strDate = <span class="string">"0"</span> + strDate;</span><br><span class="line">          }</span><br><span class="line">          <span class="keyword">var</span> currentDate =</span><br><span class="line">            date.<span class="title function_">getFullYear</span>() +</span><br><span class="line">            <span class="string">"-"</span> +</span><br><span class="line">            month +</span><br><span class="line">            <span class="string">"-"</span> +</span><br><span class="line">            strDate +</span><br><span class="line">            <span class="string">" "</span> +</span><br><span class="line">            date.<span class="title function_">getHours</span>() +</span><br><span class="line">            <span class="string">":"</span> +</span><br><span class="line">            date.<span class="title function_">getMinutes</span>() +</span><br><span class="line">            <span class="string">":"</span> +</span><br><span class="line">            date.<span class="title function_">getSeconds</span>();</span><br><span class="line">          <span class="keyword">return</span> currentDate;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> file = option.<span class="property">file</span>;</span><br><span class="line">        <span class="keyword">const</span> point = file.<span class="property">name</span>.<span class="title function_">lastIndexOf</span>(<span class="string">"."</span>);</span><br><span class="line">        <span class="keyword">let</span> suffix = file.<span class="property">name</span>.<span class="title function_">substr</span>(point);</span><br><span class="line">        <span class="keyword">let</span> fileName = file.<span class="property">name</span>.<span class="title function_">substr</span>(<span class="number">0</span>, point);</span><br><span class="line">        <span class="keyword">let</span> date = <span class="title function_">getFormatDate</span>();</span><br><span class="line">        <span class="keyword">let</span> fileNames = <span class="string">`<span class="subst">${fileName}</span>_<span class="subst">${date}</span><span class="subst">${suffix}</span>`</span>;</span><br><span class="line">        <span class="keyword">let</span> relativePath = <span class="string">"blog/"</span>;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">"oss客户端"</span>, client);</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">"文件"</span>, file);</span><br><span class="line">        <span class="comment">// 分片上传文件</span></span><br><span class="line">        <span class="keyword">let</span> ret = <span class="keyword">await</span> client.<span class="title function_">multipartUpload</span>(relativePath + fileNames, file, {</span><br><span class="line">          <span class="attr">progress</span>: <span class="keyword">async</span> <span class="keyword">function</span>(<span class="params">p</span>) {</span><br><span class="line">            <span class="keyword">let</span> e = {};</span><br><span class="line">            e.<span class="property">percent</span> = p * <span class="number">100</span>;</span><br><span class="line">            option.<span class="title function_">onProgress</span>(e);</span><br><span class="line">          },</span><br><span class="line">        });</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (ret.<span class="property">res</span>.<span class="property">statusCode</span> === <span class="number">200</span>) {</span><br><span class="line">          <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">"上传成功"</span>, ret);</span><br><span class="line">        } <span class="keyword">else</span> {</span><br><span class="line">          option.<span class="title function_">onError</span>(<span class="string">"上传失败"</span>);</span><br><span class="line">        }</span><br><span class="line">      } <span class="keyword">catch</span> (error) {</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">error</span>(error);</span><br><span class="line">        option.<span class="title function_">onError</span>(<span class="string">"上传失败"</span>);</span><br><span class="line">      }</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">loading</span> = <span class="literal">false</span>;</span><br><span class="line">    },</span><br><span class="line">  },</span><br><span class="line">};</span><br></pre></td></tr></table></figure></div>

<p><strong>全部代码</strong></p>
<div class="code-container" data-rel="Html"><figure class="iseeu highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"home"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-upload</span></span></span><br><span class="line"><span class="tag">      <span class="attr">class</span>=<span class="string">"upload-demo"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">action</span></span></span><br><span class="line"><span class="tag">      <span class="attr">:http-request</span>=<span class="string">"fnUploadRequest"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">list-type</span>=<span class="string">"picture-card"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">:on-preview</span>=<span class="string">"handlePictureCardPreview"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">:on-remove</span>=<span class="string">"handleRemove"</span></span></span><br><span class="line"><span class="tag">    &gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"el-icon-plus"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-upload</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-dialog</span> <span class="attr">:visible.sync</span>=<span class="string">"dialogVisible"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">img</span> <span class="attr">width</span>=<span class="string">"100%"</span> <span class="attr">:src</span>=<span class="string">"dialogImageUrl"</span> <span class="attr">alt</span>=<span class="string">""</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-dialog</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> <span class="variable constant_">OSS</span> <span class="keyword">from</span> <span class="string">"ali-oss"</span>;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> {</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">data</span>(<span class="params"></span>) {</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">return</span> {</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">dialogImageUrl</span>: <span class="string">""</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">dialogVisible</span>: <span class="literal">false</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">disabled</span>: <span class="literal">false</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">loading</span>: <span class="literal">false</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">fileList</span>: [],</span></span><br><span class="line"><span class="language-javascript">    };</span></span><br><span class="line"><span class="language-javascript">  },</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">methods</span>: {</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">handleRemove</span>(<span class="params">file, fileList</span>) {</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">console</span>.<span class="title function_">log</span>(file, fileList);</span></span><br><span class="line"><span class="language-javascript">    },</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">handlePictureCardPreview</span>(<span class="params">file</span>) {</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">dialogImageUrl</span> = file.<span class="property">url</span>;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">dialogVisible</span> = <span class="literal">true</span>;</span></span><br><span class="line"><span class="language-javascript">    },</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">async</span> <span class="title function_">fnUploadRequest</span>(<span class="params">option</span>) {</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">try</span> {</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">"参数"</span>, option);</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 获取OSS配置信息</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">let</span> client = <span class="keyword">new</span> <span class="title function_">OSS</span>({</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">secure</span>: <span class="literal">true</span>,</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">accessKeyId</span>: <span class="string">""</span>, <span class="comment">//阿里云AccessKey ID</span></span></span><br><span class="line"><span class="language-javascript">          <span class="attr">accessKeySecret</span>: <span class="string">""</span>, <span class="comment">//阿里云accessKeySecret</span></span></span><br><span class="line"><span class="language-javascript">          <span class="attr">bucket</span>: <span class="string">""</span>, <span class="comment">//bucket域名</span></span></span><br><span class="line"><span class="language-javascript">          <span class="attr">region</span>: <span class="string">""</span>, <span class="comment">//oss地区，如：oss-cn-beijing。（注：不用加.aliyun.com）</span></span></span><br><span class="line"><span class="language-javascript">        });</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">loading</span> = <span class="literal">true</span>;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">function</span> <span class="title function_">getFormatDate</span>(<span class="params"></span>) {</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">var</span> date = <span class="keyword">new</span> <span class="title class_">Date</span>();</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">var</span> month = date.<span class="title function_">getMonth</span>() + <span class="number">1</span>;</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">var</span> strDate = date.<span class="title function_">getDate</span>();</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">if</span> (month &gt;= <span class="number">1</span> &amp;&amp; month &lt;= <span class="number">9</span>) {</span></span><br><span class="line"><span class="language-javascript">            month = <span class="string">"0"</span> + month;</span></span><br><span class="line"><span class="language-javascript">          }</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">if</span> (strDate &gt;= <span class="number">0</span> &amp;&amp; strDate &lt;= <span class="number">9</span>) {</span></span><br><span class="line"><span class="language-javascript">            strDate = <span class="string">"0"</span> + strDate;</span></span><br><span class="line"><span class="language-javascript">          }</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">var</span> currentDate =</span></span><br><span class="line"><span class="language-javascript">            date.<span class="title function_">getFullYear</span>() +</span></span><br><span class="line"><span class="language-javascript">            <span class="string">"-"</span> +</span></span><br><span class="line"><span class="language-javascript">            month +</span></span><br><span class="line"><span class="language-javascript">            <span class="string">"-"</span> +</span></span><br><span class="line"><span class="language-javascript">            strDate +</span></span><br><span class="line"><span class="language-javascript">            <span class="string">" "</span> +</span></span><br><span class="line"><span class="language-javascript">            date.<span class="title function_">getHours</span>() +</span></span><br><span class="line"><span class="language-javascript">            <span class="string">":"</span> +</span></span><br><span class="line"><span class="language-javascript">            date.<span class="title function_">getMinutes</span>() +</span></span><br><span class="line"><span class="language-javascript">            <span class="string">":"</span> +</span></span><br><span class="line"><span class="language-javascript">            date.<span class="title function_">getSeconds</span>();</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">return</span> currentDate;</span></span><br><span class="line"><span class="language-javascript">        }</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">let</span> file = option.<span class="property">file</span>;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> point = file.<span class="property">name</span>.<span class="title function_">lastIndexOf</span>(<span class="string">"."</span>);</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">let</span> suffix = file.<span class="property">name</span>.<span class="title function_">substr</span>(point);</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">let</span> fileName = file.<span class="property">name</span>.<span class="title function_">substr</span>(<span class="number">0</span>, point);</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">let</span> date = <span class="title function_">getFormatDate</span>();</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">let</span> fileNames = <span class="string">`<span class="subst">${fileName}</span>_<span class="subst">${date}</span><span class="subst">${suffix}</span>`</span>;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">let</span> relativePath = <span class="string">"blog/"</span>;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">"oss客户端"</span>, client);</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">"文件"</span>, file);</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 分片上传文件</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">let</span> ret = <span class="keyword">await</span> client.<span class="title function_">multipartUpload</span>(relativePath + fileNames, file, {</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">progress</span>: <span class="keyword">async</span> <span class="keyword">function</span>(<span class="params">p</span>) {</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">let</span> e = {};</span></span><br><span class="line"><span class="language-javascript">            e.<span class="property">percent</span> = p * <span class="number">100</span>;</span></span><br><span class="line"><span class="language-javascript">            option.<span class="title function_">onProgress</span>(e);</span></span><br><span class="line"><span class="language-javascript">          },</span></span><br><span class="line"><span class="language-javascript">        });</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">if</span> (ret.<span class="property">res</span>.<span class="property">statusCode</span> === <span class="number">200</span>) {</span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">"上传成功"</span>, ret);</span></span><br><span class="line"><span class="language-javascript">        } <span class="keyword">else</span> {</span></span><br><span class="line"><span class="language-javascript">          option.<span class="title function_">onError</span>(<span class="string">"上传失败"</span>);</span></span><br><span class="line"><span class="language-javascript">        }</span></span><br><span class="line"><span class="language-javascript">      } <span class="keyword">catch</span> (error) {</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">error</span>(error);</span></span><br><span class="line"><span class="language-javascript">        option.<span class="title function_">onError</span>(<span class="string">"上传失败"</span>);</span></span><br><span class="line"><span class="language-javascript">      }</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">loading</span> = <span class="literal">false</span>;</span></span><br><span class="line"><span class="language-javascript">    },</span></span><br><span class="line"><span class="language-javascript">  },</span></span><br><span class="line"><span class="language-javascript">};</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.home</span> {</span></span><br><span class="line"><span class="language-css">  <span class="attribute">width</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">height</span>: <span class="number">100vh</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">position</span>: relative;</span></span><br><span class="line"><span class="language-css">}</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.upload-demo</span> {</span></span><br><span class="line"><span class="language-css">  <span class="attribute">width</span>: <span class="number">30%</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">height</span>: <span class="number">30%</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">position</span>: absolute;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">top</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">bottom</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">right</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">left</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">margin</span>: auto;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">}</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></div>
]]></content>
      <categories>
        <category>Vue</category>
      </categories>
      <tags>
        <tag>Vue</tag>
      </tags>
  </entry>
  <entry>
    <title>【LeetCode】缀点成线</title>
    <url>/posts/check-if-it-is-a-straight-line/</url>
    <content><![CDATA[<p><a class="link" href="https://leetcode.cn/problems/check-if-it-is-a-straight-line/description/">【题目链接】1232. 缀点成线<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<h3 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h3><p>给定一个数组 coordinates ，其中 coordinates[i] = [x, y] ， [x, y] 表示横坐标为 x、纵坐标为 y 的点。请你来判断，这些点是否在该坐标系中属于同一条直线上。</p>
<h3 id="实现思路一"><a href="#实现思路一" class="headerlink" title="实现思路一"></a>实现思路一</h3><ol>
<li>如果每两个点的斜率相同，那么就能确定属于同一条直线上</li>
<li>从前两个点开始依次计算斜率并存入数组</li>
<li>所有斜率存入数组后，判断数组中的斜率是否相等，如果全部相等则属于同一条直线</li>
</ol>
<h3 id="具体代码"><a href="#具体代码" class="headerlink" title="具体代码"></a>具体代码</h3><div class="code-container" data-rel="Javascript"><figure class="iseeu highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> checkStraightLine = <span class="keyword">function</span> (<span class="params">coordinates</span>) {</span><br><span class="line">  <span class="keyword">const</span> slopeArr = [];</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; coordinates.<span class="property">length</span> - <span class="number">1</span>; i++) {</span><br><span class="line">    <span class="keyword">let</span> dx = coordinates[i + <span class="number">1</span>][<span class="number">0</span>] - coordinates[i][<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">let</span> dy = coordinates[i + <span class="number">1</span>][<span class="number">1</span>] - coordinates[i][<span class="number">1</span>];</span><br><span class="line">    <span class="comment">// 考虑如果x为零的情况，代表垂直的直线</span></span><br><span class="line">    <span class="keyword">let</span> slope = dx === <span class="number">0</span> ? <span class="string">"vertical"</span> : dy / dx;</span><br><span class="line">    <span class="comment">// 将结果存入数组</span></span><br><span class="line">    slopeArr.<span class="title function_">push</span>(slope);</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 如果所有值相等则为一条直线</span></span><br><span class="line">  <span class="keyword">return</span> slopeArr.<span class="title function_">every</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> item === slopeArr[<span class="number">0</span>]);</span><br><span class="line">};</span><br></pre></td></tr></table></figure></div>

<h2 id="实现思路二"><a href="#实现思路二" class="headerlink" title="实现思路二"></a>实现思路二</h2><ol>
<li>通过前两个点算出斜率后，再根据直线方程 y = ax + b 取得截距 b</li>
<li>代入后续的其他点判断是否满足 y = ax + b</li>
</ol>
<h2 id="具体代码-1"><a href="#具体代码-1" class="headerlink" title="具体代码"></a>具体代码</h2><div class="code-container" data-rel="Javascript"><figure class="iseeu highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> checkStraightLine = <span class="keyword">function</span> (<span class="params">coordinates</span>) {</span><br><span class="line">  <span class="keyword">const</span> [x1, y1] = coordinates[<span class="number">0</span>];</span><br><span class="line">  <span class="keyword">const</span> [x2, y2] = coordinates[<span class="number">1</span>];</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 检查是否为垂直线</span></span><br><span class="line">  <span class="keyword">if</span> (x1 === x2) {</span><br><span class="line">    <span class="comment">// 检查后续点的 x 坐标是否与前两个点相同</span></span><br><span class="line">    <span class="keyword">return</span> coordinates.<span class="title function_">every</span>(<span class="function">(<span class="params">point</span>) =&gt;</span> point[<span class="number">0</span>] === x1);</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 如果不是垂直线，计算斜率 a 和截距 b</span></span><br><span class="line">  <span class="keyword">const</span> a = (y2 - y1) / (x2 - x1); <span class="comment">// 斜率</span></span><br><span class="line">  <span class="keyword">const</span> b = y1 - a * x1; <span class="comment">// 截距</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 检查后续点是否满足 y = ax + b</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">2</span>; i &lt; coordinates.<span class="property">length</span>; i++) {</span><br><span class="line">    <span class="keyword">const</span> [x, y] = coordinates[i];</span><br><span class="line">    <span class="keyword">if</span> (y !== a * x + b) {</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span>; <span class="comment">// 如果有任何一点不满足直线方程，返回 false</span></span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">};</span><br></pre></td></tr></table></figure></div>
]]></content>
      <categories>
        <category>Algorithm</category>
      </categories>
      <tags>
        <tag>LeetCode</tag>
      </tags>
  </entry>
  <entry>
    <title>【LeetCode】重新排列句子中的单词</title>
    <url>/posts/rearrange-words-in-a-sentence/</url>
    <content><![CDATA[<p><a class="link" href="https://leetcode.cn/problems/rearrange-words-in-a-sentence/description/">【题目链接】3127. 重新排列句子中的单词<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<h3 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h3><p>「句子」是一个用空格分隔单词的字符串。给你一个满足下述格式的句子 text :</p>
<p>句子的首字母大写<br>text 中的每个单词都用单个空格分隔。<br>请你重新排列 text 中的单词，使所有单词按其长度的升序排列。<strong>如果两个单词的长度相同，则保留其在原句子中的相对顺序。</strong></p>
<p>请同样按上述格式返回新的句子。</p>
<h3 id="实现思路"><a href="#实现思路" class="headerlink" title="实现思路"></a>实现思路</h3><ol>
<li>将句子按照空格分割为数组</li>
<li>根据每个单词的长度进行升序排序</li>
<li>将第一项的首字母大写</li>
<li>将数组转换为字符串的格式返回</li>
</ol>
<h3 id="具体代码"><a href="#具体代码" class="headerlink" title="具体代码"></a>具体代码</h3><p><strong>方法一</strong></p>
<p>这种是目前想出来最简单的解决方案，直接使用 js 的 sort 方法</p>
<blockquote>
<p>这里不同的 JavaScript 引擎实现的方法会有所不同，V8 引擎（Chrome 和 Node.js 使用的引擎）中使用的是 Timsort 算法，是一种稳定的排序算法。</p>
</blockquote>
<div class="code-container" data-rel="Javascript"><figure class="iseeu highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> arrangeWords = <span class="keyword">function</span> (<span class="params">text</span>) {</span><br><span class="line">  <span class="keyword">const</span> textArr = text.<span class="title function_">toLowerCase</span>().<span class="title function_">split</span>(<span class="string">" "</span>);</span><br><span class="line">  <span class="comment">// 直接使用sort方法进行排序</span></span><br><span class="line">  textArr.<span class="title function_">sort</span>(<span class="function">(<span class="params">a, b</span>) =&gt;</span> a.<span class="property">length</span> - b.<span class="property">length</span>);</span><br><span class="line">  textArr[<span class="number">0</span>] = textArr[<span class="number">0</span>][<span class="number">0</span>].<span class="title function_">toUpperCase</span>() + textArr[<span class="number">0</span>].<span class="title function_">slice</span>(<span class="number">1</span>);</span><br><span class="line">  <span class="keyword">return</span> textArr.<span class="title function_">join</span>(<span class="string">" "</span>);</span><br><span class="line">};</span><br></pre></td></tr></table></figure></div>

<p><strong>方法二</strong></p>
<p>上面提到了稳定的排序算法，起因是一开始打算使用选择排序，发现不符合题目中“如果两个单词的长度相同，则保留其在原句子中的相对顺序。”的要求。</p>
<p>排序算法分为非稳定排序和稳定排序。</p>
<ul>
<li><strong>非稳定性排序</strong> 指在排序过程中，相等元素的相对位置可能会发生改变的排序算法。如果序列中有两个元素相等，经过非稳定排序后，它们的相对顺序可能与排序前不同。常见的非稳定性排序有：<ul>
<li>快速排序</li>
<li>选择排序</li>
<li>堆排序</li>
</ul>
</li>
<li><strong>稳定性排序</strong>指在排序过程中，相等元素的相对位置保持不变的排序算法。如果序列中有两个元素相等，经过稳定排序后，它们的相对顺序与排序前相同。常见的稳定性排序有：<ul>
<li>冒泡排序</li>
<li>插入排序</li>
<li>归并排序</li>
<li>计数排序</li>
<li>基数排序</li>
<li>桶排序</li>
</ul>
</li>
</ul>
<p>使用桶排序</p>
<div class="code-container" data-rel="Javascript"><figure class="iseeu highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> arrangeWords = <span class="keyword">function</span> (<span class="params">text</span>) {</span><br><span class="line">  <span class="keyword">const</span> textArr = text.<span class="title function_">toLowerCase</span>().<span class="title function_">split</span>(<span class="string">" "</span>);</span><br><span class="line">  <span class="keyword">const</span> buckets = {};</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">const</span> item <span class="keyword">of</span> textArr) {</span><br><span class="line">    <span class="keyword">if</span> (buckets[item.<span class="property">length</span>]) {</span><br><span class="line">      buckets[item.<span class="property">length</span>].<span class="title function_">push</span>(item);</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">      buckets[item.<span class="property">length</span>] = [item];</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> result = [];</span><br><span class="line">  <span class="title class_">Object</span>.<span class="title function_">keys</span>(buckets).<span class="title function_">forEach</span>(<span class="function">(<span class="params">keys</span>) =&gt;</span> {</span><br><span class="line">    result = result.<span class="title function_">concat</span>(buckets[keys]);</span><br><span class="line">  });</span><br><span class="line"></span><br><span class="line">  result[<span class="number">0</span>] = result[<span class="number">0</span>][<span class="number">0</span>].<span class="title function_">toUpperCase</span>() + result[<span class="number">0</span>].<span class="title function_">slice</span>(<span class="number">1</span>);</span><br><span class="line">  <span class="keyword">return</span> result.<span class="title function_">join</span>(<span class="string">" "</span>);</span><br><span class="line">};</span><br></pre></td></tr></table></figure></div>

<p><a class="link" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/sort">Array.prototype.sort() - JavaScript | MDN<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<p><a class="link" href="https://v8.dev/blog/array-sort#timsort">Getting things sorted in V8 · V8<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<p><a class="link" href="https://zh.wikipedia.org/wiki/Timsort">Timsort - 维基百科，自由的百科全书<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
]]></content>
      <categories>
        <category>Algorithm</category>
      </categories>
      <tags>
        <tag>LeetCode</tag>
      </tags>
  </entry>
  <entry>
    <title>【LeetCode】构造相同颜色的正方形</title>
    <url>/posts/make-a-square-with-the-same-color/</url>
    <content><![CDATA[<p><a class="link" href="https://leetcode.cn/problems/make-a-square-with-the-same-color/description/">【题目链接】3127. 构造相同颜色的正方形<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<h3 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h3><p>给你一个二维 3 x 3 的矩阵 grid ，每个格子都是一个字符，要么是 ‘B’ ，要么是 ‘W’ 。字符 ‘W’ 表示白色，字符 ‘B’ 表示黑色。</p>
<p>你的任务是改变 至多一个 格子的颜色，使得矩阵中存在一个 2 x 2 颜色完全相同的正方形。</p>
<p>如果可以得到一个相同颜色的 2 x 2 正方形，那么返回 true ，否则返回 false 。</p>
<h3 id="实现思路"><a href="#实现思路" class="headerlink" title="实现思路"></a>实现思路</h3><ol>
<li><strong>遍历所有可能的 2x2 正方形</strong></li>
</ol>
<ul>
<li>(0,0) 到 (1,1)</li>
<li>(0,1) 到 (1,2)</li>
<li>(1,0) 到 (2,1)</li>
<li>(1,1) 到 (2,2)</li>
</ul>
<ol start="2">
<li><strong>统计每个 2x2 正方形中’B’和’W’的数量</strong></li>
</ol>
<p>如果 B 或 W 的数量大于等于 3（因为测试案例中还有 4 格都是’B’或’W’的情况）那么就符合条件</p>
<h3 id="具体代码"><a href="#具体代码" class="headerlink" title="具体代码"></a>具体代码</h3><div class="code-container" data-rel="Javascript"><figure class="iseeu highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 辅助函数：检查给定的 2x2 正方形是否可以通过改变一个格子来使其颜色完全相同</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">checkSquare</span> = (<span class="params">x, y</span>) =&gt; {</span><br><span class="line">  <span class="keyword">let</span> countB = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">let</span> countW = <span class="number">0</span>;</span><br><span class="line">  <span class="comment">// 统计 2x2 正方形中 'B' 和 'W' 的数量</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = x; i &lt; x + <span class="number">2</span>; i++) {</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> j = y; j &lt; y + <span class="number">2</span>; j++) {</span><br><span class="line">      <span class="keyword">if</span> (grid[i][j] === <span class="string">"B"</span>) {</span><br><span class="line">        countB++;</span><br><span class="line">      } <span class="keyword">else</span> {</span><br><span class="line">        countW++;</span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">  <span class="comment">// 判断是否可以通过改变一个格子来满足条件,大于3是因为有可能</span></span><br><span class="line">  <span class="keyword">return</span> countB &gt;= <span class="number">3</span> || countW &gt;= <span class="number">3</span>;</span><br><span class="line">};</span><br><span class="line"></span><br><span class="line"><span class="comment">// 遍历所有可能的 2x2 正方形</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">2</span>; i++) {</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; <span class="number">2</span>; j++) {</span><br><span class="line">    <span class="keyword">if</span> (<span class="title function_">checkSquare</span>(i, j)) {</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// 如果没有找到符合条件的 2x2 正方形，返回 false</span></span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br></pre></td></tr></table></figure></div>
]]></content>
      <categories>
        <category>Algorithm</category>
      </categories>
      <tags>
        <tag>LeetCode</tag>
      </tags>
  </entry>
  <entry>
    <title>【Nas折腾日记】Frp + Nginx 内网穿透</title>
    <url>/posts/nas-note-frp-nginx/</url>
    <content><![CDATA[<p>目前的主要需求是外网通过对应服务的域名访问 Nas 上的服务，所以需要做内网穿透。</p>
<p>其实 IPv6 + DDNS 也可以解决，也不需要再自行购买服务器了，但是有个弊端是家用宽度屏蔽了 80 和 443 端口，所以访问的时候需要加上端口号，不太方便。</p>
<h3 id="所需设备"><a href="#所需设备" class="headerlink" title="所需设备"></a>所需设备</h3><ul>
<li>一台公网服务器（如果是国内服务器需要备案）</li>
<li>一台在内网的 Nas</li>
</ul>
<h3 id="公网服务器配置"><a href="#公网服务器配置" class="headerlink" title="公网服务器配置"></a>公网服务器配置</h3><h4 id="Frps"><a href="#Frps" class="headerlink" title="Frps"></a>Frps</h4><p>从 Frp 的 <a class="link" href="https://github.com/fatedier/frp/releases">Github Release<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a> 页面下载对应的版本，然后解压。</p>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">wget https://github.com/fatedier/frp/releases/download/v0.61.2/frp_0.61.2_linux_amd64.tar.gz</span><br><span class="line"></span><br><span class="line">tar -zxvf frp_0.61.2_linux_amd64.tar.gz</span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> frp_0.61.2_linux_amd64</span><br></pre></td></tr></table></figure></div>

<p>打开解压后的文件夹后，可以看到 <code>frps.toml</code> 文件，这个文件是 Frps 的配置文件。</p>
<blockquote>
<p>需要注意的是，在 Frp 官网中提到，目前支持的文件格式包括 TOML/YAML/JSON，旧的 INI 格式仍然支持，但已经不再推荐。但网络中的大多数教程都是使用的 INI 格式，参照时需注意格式转换。</p>
</blockquote>
<div class="code-container" data-rel="Toml"><figure class="iseeu highlight toml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># frps绑定的端口</span></span><br><span class="line"><span class="attr">bindPort</span> = <span class="number">7000</span></span><br><span class="line"><span class="comment"># 指定HTTP请求的监听地址，这里推荐设置80端口以外的端口，因为80端口后续要在Nginx中使用</span></span><br><span class="line"><span class="attr">vhostHTTPPort</span> = <span class="number">8080</span></span><br><span class="line"><span class="comment"># 二级域名后缀，需要将 *.your_domain.com 解析到公网服务器地址</span></span><br><span class="line"><span class="comment"># 参考文档：https://gofrp.org/zh-cn/docs/features/http-https/subdomain/</span></span><br><span class="line"><span class="attr">subdomainHost</span> = <span class="string">"your_domain.com"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 启用 dashboard,访问7500端口可以看到frps的状态</span></span><br><span class="line"><span class="attr">webServer.addr</span> = <span class="string">"0.0.0.0"</span></span><br><span class="line"><span class="attr">webServer.port</span> = <span class="number">7500</span></span><br><span class="line"><span class="comment"># dashboard 用户名密码，可选，默认为空</span></span><br><span class="line"><span class="attr">webServer.user</span> = <span class="string">"admin"</span></span><br><span class="line"><span class="attr">webServer.password</span> = <span class="string">"admin"</span></span><br></pre></td></tr></table></figure></div>

<p>编写完配置文件后，即可启动 Frps。</p>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">./frps -c frps.toml</span><br></pre></td></tr></table></figure></div>

<p>这里推荐使用 <code>systemd</code> 来管理 Frps 服务，具体不再赘述。</p>
<h4 id="acme-sh"><a href="#acme-sh" class="headerlink" title="acme.sh"></a>acme.sh</h4><blockquote>
<p>如果不需要 HTTPS 可以跳过这一步。</p>
</blockquote>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 安装 acme.sh</span></span><br><span class="line">curl https://get.acme.sh | sh -s email=my@example.com</span><br><span class="line"></span><br><span class="line"><span class="comment"># 这里以CF为例，其他DNS服务商请参考官方文档</span></span><br><span class="line"><span class="comment"># 设置CloudFlare的API Key</span></span><br><span class="line"><span class="built_in">export</span> CF_Key=<span class="string">"xxxxxxxxxxxxxxxxxxxxxxxxxx"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># DNS验证</span></span><br><span class="line">/root/.acme.sh/acme.sh --issue --dns dns_cf -d *.your_domain.com</span><br><span class="line"></span><br><span class="line"><span class="comment"># 复制证书</span></span><br><span class="line"><span class="comment"># /ssl/key.pem和/ssl/crt.pem存放证书的路径，可以自行修改</span></span><br><span class="line"><span class="comment"># 最后的reloadcmd是证书更新后的重启命令，这里是重启frps，如果是其他服务可以自行修改</span></span><br><span class="line">/root/.acme.sh/acme.sh --install-cert -d *.your_domain.com --key-file       /ssl/key.pem  --fullchain-file /ssl/crt.pem --reloadcmd     <span class="string">"service frps restart"</span></span><br></pre></td></tr></table></figure></div>

<h4 id="Nginx"><a href="#Nginx" class="headerlink" title="Nginx"></a>Nginx</h4><div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 安装 Nginx</span></span><br><span class="line">sudo apt install nginx -y</span><br><span class="line"></span><br><span class="line">sudo systemctl start nginx</span><br><span class="line"></span><br><span class="line">sudo systemctl <span class="built_in">enable</span> nginx</span><br><span class="line"></span><br><span class="line">systemctl status nginx</span><br></pre></td></tr></table></figure></div>

<p>配置 Nginx</p>
<blockquote>
<p>/etc/nginx/default.conf 或者自行新建一个 conf 文件</p>
</blockquote>
<div class="code-container" data-rel="Nginx"><figure class="iseeu highlight nginx"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 子域名通配配置</span></span><br><span class="line"><span class="section">server</span> {</span><br><span class="line">    <span class="attribute">listen</span> <span class="number">443</span> ssl;</span><br><span class="line">    <span class="attribute">server_name</span> <span class="regexp">*.your</span>_domian.com;  <span class="comment"># 匹配所有子域名</span></span><br><span class="line">    <span class="attribute">ssl_certificate</span> /ssl/crt.pem; <span class="comment"># 证书路径</span></span><br><span class="line">    <span class="attribute">ssl_certificate_key</span> /ssl/key.pem; <span class="comment"># 私钥路径</span></span><br><span class="line"></span><br><span class="line">    <span class="section">location</span> / {</span><br><span class="line">        <span class="comment"># 代理到frps的vhostHTTPPort端口</span></span><br><span class="line">        <span class="attribute">proxy_pass</span> http://127.0.0.1:8080;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> Host <span class="variable">$host</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> X-Forwarded-For <span class="variable">$proxy_add_x_forwarded_for</span>;</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment"># HTTP统一跳转</span></span><br><span class="line"><span class="section">server</span> {</span><br><span class="line">    <span class="attribute">listen</span> <span class="number">80</span>;</span><br><span class="line">    <span class="attribute">server_name</span> <span class="regexp">*.your</span>_domian.com;</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 带端口重定向（防止端口丢失）</span></span><br><span class="line">    <span class="attribute">return</span> <span class="number">301</span> https://<span class="variable">$host</span>:443<span class="variable">$request_uri</span>;</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></table></figure></div>

<h3 id="Nas-配置"><a href="#Nas-配置" class="headerlink" title="Nas 配置"></a>Nas 配置</h3><p>Nas 的配置比较简单，只需要下载对应的 Frpc 版本，然后配置 Frpc 的配置文件即可。</p>
<div class="code-container" data-rel="Toml"><figure class="iseeu highlight toml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 公网服务器地址</span></span><br><span class="line"><span class="attr">serverAddr</span> = <span class="string">"xxx.xxx.xxx.xxx"</span></span><br><span class="line"><span class="comment"># 公网服务器端口</span></span><br><span class="line"><span class="attr">serverPort</span> = <span class="number">7000</span></span><br><span class="line"><span class="comment"># 连接失败后退出</span></span><br><span class="line"><span class="attr">loginFailExit</span>=<span class="literal">false</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="section">[[proxies]]</span></span><br><span class="line"><span class="attr">name</span> = <span class="string">"test1"</span></span><br><span class="line"><span class="attr">type</span> = <span class="string">"http"</span></span><br><span class="line"><span class="comment"># 本地服务地址，也有可能需要填写192.168.xxx.xxx的内网地址</span></span><br><span class="line"><span class="attr">localIp</span> = <span class="string">"127.0.0.1"</span></span><br><span class="line"><span class="attr">localPort</span> = <span class="number">1111</span></span><br><span class="line"><span class="comment"># 子域名配置</span></span><br><span class="line"><span class="attr">subdomain</span> = <span class="string">"test1"</span></span><br><span class="line"></span><br><span class="line"><span class="section">[[proxies]]</span></span><br><span class="line"><span class="attr">name</span> = <span class="string">"test1"</span></span><br><span class="line"><span class="attr">type</span> = <span class="string">"http"</span></span><br><span class="line"><span class="attr">localIp</span> = <span class="string">"127.0.0.1"</span></span><br><span class="line"><span class="attr">localPort</span> = <span class="number">13210</span></span><br><span class="line"><span class="comment"># 子域名配置</span></span><br><span class="line"><span class="attr">subdomain</span> = <span class="string">"test2"</span></span><br></pre></td></tr></table></figure></div>

<p>填写完配置文件后，启动 Frpc 即可（填写了 subdomian 后，不需要在 dns 服务商中再去解析）。</p>
<blockquote>
<p>参考链接</p>
</blockquote>
<ul>
<li><a class="link" href="https://gofrp.org/zh-cn/docs/overview/">Frp<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></li>
<li><a class="link" href="https://github.com/acmesh-official/acme.sh">acme.sh<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></li>
</ul>
]]></content>
      <categories>
        <category>Nas</category>
      </categories>
      <tags>
        <tag>Nas</tag>
      </tags>
  </entry>
  <entry>
    <title>信院成绩录入辅助系统使用教程</title>
    <url>/posts/9495/</url>
    <content><![CDATA[<h1 id="成绩表格式规范"><a href="#成绩表格式规范" class="headerlink" title="成绩表格式规范"></a>成绩表格式规范</h1><p>百分比成绩表与5档成绩表的excel文件有些许不同，请注意格式规范</p>
<h2 id="百分比成绩表"><a href="#百分比成绩表" class="headerlink" title="百分比成绩表"></a>百分比成绩表</h2><p>一共四列从左至右依次为：学号、姓名、平时成绩、期末成绩。</p>
<p>学生顺序最好以成绩录入网站的顺序为主，excel文件可随意命名。</p>
<p><img lazyload="" src="/images/loading.svg" data-src="https://jhao413.oss-cn-beijing.aliyuncs.com/blog/20220609103323.png"></p>
<h2 id="5档成绩表"><a href="#5档成绩表" class="headerlink" title="5档成绩表"></a>5档成绩表</h2><p>一共四列从左至右依次为：学号、姓名、平时成绩、期末成绩。</p>
<p>成绩录入为：优秀-良好-中等-及格-不及格。</p>
<p>学生顺序最好以成绩录入网站的顺序为主，excel文件可随意命名。</p>
<p><img lazyload="" src="/images/loading.svg" data-src="https://jhao413.oss-cn-beijing.aliyuncs.com/blog/20220616102626.png"></p>
<h1 id="插件使用指南"><a href="#插件使用指南" class="headerlink" title="插件使用指南"></a>插件使用指南</h1><p>下图为成绩录入辅助系统的主页面，选择excel文件的成绩表（5档与百分比均可）</p>
<p><img lazyload="" src="/images/loading.svg" data-src="https://jhao413.oss-cn-beijing.aliyuncs.com/blog/20220616101811.png"></p>
<p>上传成功后插件底部出现上传的文件名，请老师根据需求以及上传的文件选择录入方式，选择后成绩即录入成功。</p>
<p><img lazyload="" src="/images/loading.svg" data-src="https://jhao413.oss-cn-beijing.aliyuncs.com/blog/20220616101854.png"></p>
<h1 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h1><ul>
<li>excel文件不可打开多个工作表，请在上传前确认当前excel文件中只有一个工作表。<br><img lazyload="" src="/images/loading.svg" data-src="https://jhao413.oss-cn-beijing.aliyuncs.com/blog/20220616102125.png"></li>
<li>如遇到成绩录入无响应时，请刷新页面重试，若问题任未解决请联系作者反馈。</li>
<li>请各位老师在编辑成绩表时，注意在文档前后不要出现合并单元格等非必要的格式，否则在读取时也会算作一行数据。（不会对录入成绩造成影响，仅在最后弹窗提醒时可能出现统计录入数据条数出错）</li>
</ul>
]]></content>
      <categories>
        <category>Chrome</category>
      </categories>
      <tags>
        <tag>Chrome</tag>
      </tags>
  </entry>
  <entry>
    <title>避免 Day.js 与 UTC 时区的常见陷阱</title>
    <url>/posts/2/</url>
    <content><![CDATA[<p>在前端开发中，我们通常使用 Day.js 来格式化从后端传递过来的时间数据。后端传来的时间通常是标准的 UTC 格式，例如：</p>
<ul>
<li>2015-09-01T14:55:00+00:00<ul>
<li>2015-09-01 表示日期，格式为 YYYY-MM-DD</li>
<li>T 是日期和时间的分隔符</li>
<li>14:55:00 表示时间，格式为 HH:MM:SS</li>
<li>+00:00 表示时区偏移，+00:00 代表 UTC 时间<br>因为之前公司一直都是把本地时间直接存UTC时区+00:00，但这种做法存在不规范之处——在不同的时区查看时间时可能会出现错误。实际上，更为标准的做法是将本地时间按照当地时区（如 +08:00）存储。</li>
</ul>
</li>
</ul>
<p>由于之前的习惯，前端代码通常是这样来格式化时间的：</p>
<div class="code-container" data-rel="Javascript"><figure class="iseeu highlight javascript"><table><tr><td class="code"><pre><span class="line">dayjs.<span class="title function_">utc</span>(item.<span class="property">filledOn</span>).<span class="title function_">format</span>(<span class="string">'YYYY-MM-DD HH:mm:ss'</span>);</span><br></pre></td></tr></table></figure></div>

<p>这段代码的假设前提是所有存储的时间都是 UTC 时间。因此，当我们遇到如下时间格式时：</p>
<div class="code-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="code"><pre><span class="line">2024-08-26T09:56:45.403258+08:00</span><br></pre></td></tr></table></figure></div>

<p>这时使用 dayjs.utc() 进行格式化，就会导致时间被错误地减去 8 小时。这种错误应该在时间存储时统一规避，以避免前端展示错误的时间信息。当然在前端处理时间信息时，也应该多注意时区的格式和时区问题。</p>
<p><a class="link" href="https://day.js.org/docs/zh-CN/parse/utc">UTC·Day.js<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
<p><a class="link" href="https://zh.wikipedia.org/wiki/%E5%8D%8F%E8%B0%83%E4%B8%96%E7%95%8C%E6%97%B6">协调世界时·维基百科<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>
]]></content>
      <categories>
        <category>Frontnd</category>
      </categories>
      <tags>
        <tag>Frontnd</tag>
      </tags>
  </entry>
  <entry>
    <title>首马完赛</title>
    <url>/posts/first-marathon/</url>
    <content><![CDATA[<p>今年 6 月份开始有了跑步的习惯，原因一是大学吃吃吃，体重一度来到 160 斤，然后去医院体检，查出来有脂肪肝，双肾结晶等毛病，出于年纪轻轻还没活够，觉得应该运动运动了。</p>
<p>原因二是一次聊天，突然头脑风暴，如果以玩游戏的视角来看待自己，那我这个游戏角色属性和等级也太糟糕了 hh，这号再这样下去，以后的游戏就没啥玩头了，基础属性：体力、智力、力量、敏捷、颜值、魅力没一个能打的。当时觉得普通人喜欢玩游戏，是因为自身的生活太枯燥，无趣，所以需要游戏来调剂生活，在游戏里玩家永远是主角，可以是西部牛仔、骑士、超级英雄、赛车手，甚至是齐天大圣，这些角色的生活实在是太精彩了，现在也该玩玩自己所在的游戏了，虽然大概率搞不出什么名堂，但也起码得让基础属性上去点试试呢。</p>
<p>于是从 6 月份慢慢开始喜欢跑步了，之前一直不知道怎么形容这种感觉，就是觉得跑步的时候，我身上的角色都可以先放一放，不用是员工、儿子、租客，可以只是我自己，后来看了《强风吹拂》，其中尼古丁学长对于自己跑步意义的回答，感觉把我的想法表达出来了：</p>
<blockquote>
<p>我在跑步的时候，只有这个时候，会觉得自己被净化了，变得纯洁无暇，仿佛身上的那些累赘，都能全部抛诸脑后，只要能有一瞬间的痛快，那我愿意</p>
</blockquote>
<p>曾经我也不理解为什么要长跑，也不理解为什么父母喜欢强调苦难，自己经受的苦难，别人经受的苦难，我总是认为苦难就是苦难，如果可以避免那就避免，苦难没有什么意义，为什么总喜欢把苦难挂在嘴边，父母每每提到类似的经历，我总说：“如果苦难有意义，可以让人成功，变得富有，那你们吃的苦应该比大多数人多吧，为什么到了现在还在吃苦，家里为什么没有变富呢”，这句话总是能让爸妈无言以对。</p>
<p>从我跑步开始，爸妈就开始出于关心的问我了 hh</p>
<ul>
<li>“哎呀，你都跑 5 公里，咋还要跑 10 公里，多累啊”</li>
<li>“这么冷的天就别跑了，你看脸冻得”</li>
<li>“半马能跑完就行，你视频最后咋还拼一拼”</li>
<li>“你看最后一公里，到终点累的趴在那，都给你说了累了就不跑了呀”</li>
</ul>
<blockquote>
<p>你看待痛苦的方式 就是看待人生的方式 —— 基普乔格</p>
</blockquote>
<p>这下好像理解了爸妈为什么总是喜欢说苦难，苦难本身确实没有意义，但人面对苦难的态度非凡。</p>
<p>鸡汤太多了哈哈，简单记录一下首马完赛（虽然很菜）</p>
<p>最后也得感谢好哥们一路带我跑完半马 T-T</p>
<p><img lazyload="" src="/images/loading.svg" data-src="https://jhao413.oss-cn-beijing.aliyuncs.com/mmexport240c8c247a4aac383561a3cbf6488562_17348685.jpg"></p>
]]></content>
      <categories>
        <category>跑步</category>
      </categories>
      <tags>
        <tag>跑步</tag>
      </tags>
  </entry>
</search>
